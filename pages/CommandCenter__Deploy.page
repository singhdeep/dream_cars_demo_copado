<apex:page controller="CommandCenter.DeployController" sidebar="false" standardStylesheets="false" showHeader="false" applyBodyTag="false" applyHtmlTag="false" docType="html-5.0" cache="true"> <!-- action="{!triggerJenkinsJob}" -->
    <apex:stylesheet value="{!URLFOR($Resource.CommandCenter__SDLCV_2_1_3, '/assets/styles/salesforce-lightning-design-system.css')}"/>
    <html>
        <head>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
            <link rel="stylesheet" href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
                <script src="https://static.fusioncharts.com/code/latest/fusioncharts.js"/>
                    <script src="https://static.fusioncharts.com/code/latest/fusioncharts.charts.js"/>
                        <script src="https://code.jquery.com/jquery-1.9.1.js"></script>
            <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
            
            <script>
                if(jQuery) {
                    jQuery.noConflict(true);
                }
            </script>
            
            <style>
                .ui-datepicker{
                width: 20.5em !important;
                }
                .slds-is-aborted{ 
                height: 38px!important;  /* Can be anything */
                width : 160px!important;
                position: relative!important;
                background-color:#bab4b4;
                -webkit-box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3)!important;
                -moz-box-shadow   : inset 0 -1px 1px rgba(255,255,255,0.3)!important;
                box-shadow        : inset 0 -1px 1px rgba(255,255,255,0.3)!important;
                
                }
                .slds-is-current{
                display: block!important;
                background-color: rgb(43,194,83)!important;
                background-image: 
                -webkit-gradient(linear, 0 0, 100% 100%, 
                color-stop(.25, rgba(255, 255, 255, .2)), 
                color-stop(.25, transparent), color-stop(.5, transparent), 
                color-stop(.5, rgba(255, 255, 255, .2)), 
                color-stop(.75, rgba(255, 255, 255, .2)), 
                color-stop(.75, transparent), to(transparent)
                )!important;
                background-image: 
                -moz-linear-gradient(
                -45deg, 
                rgba(255, 255, 255, .2) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255, 255, 255, .2) 50%, 
                rgba(255, 255, 255, .2) 75%, 
                transparent 75%, 
                transparent
                )!important;
                z-index: 1!important;
                -webkit-background-size: 15px 15px!important;
                -moz-background-size: 15px 15px!important;
                -webkit-animation: move 7s linear infinite!important;
                
                overflow: hidden;
                }
                
                .slds-tabs--path .slds-is-current + .slds-is-incomplete:before{
                background-color: #06C618 !important;/*#4bca81*/
                background-image: 
                -webkit-gradient(linear, 0 0, 100% 100%, 
                color-stop(.25, rgba(255, 255, 255, .2)), 
                color-stop(.25, transparent), color-stop(.5, transparent), 
                color-stop(.5, rgba(255, 255, 255, .2)), 
                color-stop(.75, rgba(255, 255, 255, .2)), 
                color-stop(.75, transparent), to(transparent)
                )!important;
                background-image: 
                -moz-linear-gradient(
                -45deg, 
                rgba(255, 255, 255, .2) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255, 255, 255, .2) 50%, 
                rgba(255, 255, 255, .2) 75%, 
                transparent 75%, 
                transparent
                )!important;
                z-index: 1!important;
                -webkit-background-size: 15px 15px!important;
                -moz-background-size: 15px 15px!important;
                -webkit-animation: move 7s linear infinite!important;
                
                overflow: hidden;
                }
                
                .slds-tabs--path__link{
                padding: 0.25rem 0.25rem 0.10rem 1.25rem;
                line-height: 1.05rem;
                }
            </style>
            
            <style>
                /* For PRogress bar */
                /* Below creating issue on new checklist item popup
                *, *:before, *:after {
                box-sizing: content-box !important;
                } */
                .meter { 
                height: 8px;  /* Can be anything */
                width : 160px;
                position: relative;
                /* margin: 60px 0 20px 0; Just for demo spacing */
                background: #555;
                -moz-border-radius: 25px;
                -webkit-border-radius: 25px;
                border-radius: 25px;
                /* padding: 10px;*/
                -webkit-box-shadow: inset 0 -1px 1px rgba(255,255,255,0.3);
                -moz-box-shadow   : inset 0 -1px 1px rgba(255,255,255,0.3);
                box-shadow        : inset 0 -1px 1px rgba(255,255,255,0.3);
                }
                .meter > span {
                display: block;
                height: 100%;
                -webkit-border-top-right-radius: 8px;
                -webkit-border-bottom-right-radius: 8px;
                -moz-border-radius-topright: 8px;
                -moz-border-radius-bottomright: 8px;
                border-top-right-radius: 8px;
                border-bottom-right-radius: 8px;
                -webkit-border-top-left-radius: 20px;
                -webkit-border-bottom-left-radius: 20px;
                -moz-border-radius-topleft: 20px;
                -moz-border-radius-bottomleft: 20px;
                border-top-left-radius: 20px;
                border-bottom-left-radius: 20px;
                background-color: rgb(43,194,83);
                background-image: -webkit-gradient(
                linear,
                left bottom,
                left top,
                color-stop(0, rgb(43,194,83)),
                color-stop(1, rgb(84,240,84))
                );
                background-image: -moz-linear-gradient(
                center bottom,
                rgb(43,194,83) 37%,
                rgb(84,240,84) 69%
                );
                -webkit-box-shadow: 
                inset 0 2px 9px  rgba(255,255,255,0.3),
                inset 0 -2px 6px rgba(0,0,0,0.4);
                -moz-box-shadow: 
                inset 0 2px 9px  rgba(255,255,255,0.3),
                inset 0 -2px 6px rgba(0,0,0,0.4);
                box-shadow: 
                inset 0 2px 9px  rgba(255,255,255,0.3),
                inset 0 -2px 6px rgba(0,0,0,0.4);
                position: relative;
                overflow: hidden;
                }
                .meter > span:after, .animate > span > span {
                content: "";
                position: absolute;
                top: 0; left: 0; bottom: 0; right: 0;
                background-image: 
                -webkit-gradient(linear, 0 0, 100% 100%, 
                color-stop(.25, rgba(255, 255, 255, .2)), 
                color-stop(.25, transparent), color-stop(.5, transparent), 
                color-stop(.5, rgba(255, 255, 255, .2)), 
                color-stop(.75, rgba(255, 255, 255, .2)), 
                color-stop(.75, transparent), to(transparent)
                );
                background-image: 
                -moz-linear-gradient(
                -45deg, 
                rgba(255, 255, 255, .2) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255, 255, 255, .2) 50%, 
                rgba(255, 255, 255, .2) 75%, 
                transparent 75%, 
                transparent
                );
                z-index: 1;
                -webkit-background-size: 50px 50px;
                -moz-background-size: 50px 50px;
                -webkit-animation: move 2s linear infinite;
                -webkit-border-top-right-radius: 8px;
                -webkit-border-bottom-right-radius: 8px;
                -moz-border-radius-topright: 8px;
                -moz-border-radius-bottomright: 8px;
                border-top-right-radius: 8px;
                border-bottom-right-radius: 8px;
                -webkit-border-top-left-radius: 20px;
                -webkit-border-bottom-left-radius: 20px;
                -moz-border-radius-topleft: 20px;
                -moz-border-radius-bottomleft: 20px;
                border-top-left-radius: 20px;
                border-bottom-left-radius: 20px;
                overflow: hidden;
                }
                
                .animate > span:after {
                display: none;
                }
                
                @-webkit-keyframes move {
                0% {
                background-position: 0 0;
                }
                100% {
                background-position: 50px 50px;
                }
                }
                
                .orange > span {
                background-color: #f1a165;
                background-image: -moz-linear-gradient(top, #f1a165, #f36d0a);
                background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, #f1a165),color-stop(1, #f36d0a));
                background-image: -webkit-linear-gradient(#f1a165, #f36d0a); 
                }
                
                .red > span {
                background-color: #f0a3a3;
                background-image: -moz-linear-gradient(top, #f0a3a3, #f42323);
                background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, #f0a3a3),color-stop(1, #f42323));
                background-image: -webkit-linear-gradient(#f0a3a3, #f42323);
                }
                
                .nostripes > span > span, .nostripes > span:after {
                -webkit-animation: none;
                background-image: none;
                }
                /* For PRogress bar */
                
                .slds-page-header__detail-block{
                max-width: 50% !important;
                }
                /*progress Bar style*/
                .progressBar {
                height: 22px;
                border: 1px solid rgba(17, 17, 17, 0.04);
                background-color: rgba(41, 41, 41, 0.02);
                margin-bottom: -22px;
                // border-radius: 9px;
                font-weight: bold;
                }
                
                .progressBar div {
                height: 100%;
                color: #fff;
                text-align: center;
                line-height: 22px; /* same as #progressBar height if we want text middle aligned */
                width: 0;
                background-color: #5dc34a;
                animation: progress-bar-stripes 2s linear infinite;
                background-image: -webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);
                background-image: -o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);
                background-image: linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent);
                -webkit-background-size: 40px 40px;
                background-size: 40px 40px;
                //border-radius: 8px;
                font-size: medium;
                }
                slds-tabs--path__item:before{
                
                }
                
                .slds-tabs--path__item + .slds-is-complete + .slds-is-hidden:before {
                background-color: white;
                }
                
                .slds-tabs--path__item + .slds-is-complete + .slds-is-aborted:before {
                background-color: white;
                }
                
                /* Complete to new step */
                
                .slds-tabs--path .slds-is-complete + .slds-is-aborted:before{
                background-color: #4bca81;
                }
                
                .slds-tabs--path .slds-is-complete + .slds-is-current:before{
                background-color: #4bca81;
                }
                .slds-tabs--path .slds-is-complete + .slds-is-lost:before{
                background-color: #4bca81;
                }
                .slds-tabs--path .slds-is-complete + .slds-is-complete:before{
                background-color: #4bca81;
                }
                .slds-tabs--path .slds-is-complete + .slds-is-incomplete:before{
                background-color: #4bca81;
                }
                
                .slds-tabs--path .slds-is-aborted + .slds-is-incomplete:before{
                background-color: #bab4b4;
                }
                
                /* Hidden to new Step */
                .slds-tabs--path .slds-is-hidden + .slds-is-current:before{
                background-color: white;
                }
                .slds-tabs--path .slds-is-hidden + .slds-is-lost:before{
                background-color: white;
                }
                .slds-tabs--path .slds-is-hidden + .slds-is-complete:before{
                background-color: white;
                }
                .slds-tabs--path .slds-is-hidden + .slds-is-hidden:before{
                background-color: white;
                }
                
                /* lost to new Step */
                .slds-tabs--path .slds-is-lost + .slds-is-incomplete:before{
                background-color: #c23934;
                }
                .hide {
                display: none;
                }
                .slds-input{
                width: 90% !important;
                }
                
                .sectionHeader{
                background: #dcf9a2;
                color: #169c1b;
                padding: 5px;
                }
                
                .sectionHeaderIcon{
                width:20px;
                height:20px;
                }
                
                .pageHeader{
                text-align: center;
                font-weight: bold;
                font-size: 1.75rem;
                color: white;
                }
                
                .bgcolor{
                background: #BDDEE9;
                padding-top: 5px;
                }
                
                .releaseSection{
                padding-right: 0rem;
                }
                .treeIcon{
                width:20px;
                height:20px;
                margin-top: 5px;
                margin-right: 5px;
                }
                
                .Downloadscontainer{
                width:100%;
                }       
                
                .btn{
                
                } 
                
                .btnAdd{
                padding-left: 2px;
                padding-right: 2px;
                margin-left: 4%;
                line-height: 0rem;
                }
                .slds-tabs--path__item{
                height: 38px;
                }
                
                .buildInfo{
                #width: 11%;
                #padding-top: 5px;
                #font-size: 15px;
                #font-weight: bold;
                #border: 1px solid;
                background-color: #e0e5ee;
                #border-radius: 1rem;
                #height:100px;
                }
                
                .buildInfoIcons{
                width:10px;
                height:10px;
                padding-right: 3px;
                }
                
                .statusIcon{
                width:25px; 
                height:25px;
                }
                
                .imgPos{
                margin-left: 30%;
                }
                
                .lookupIcon {
                background-image: url(/img/func_icons/util/lookup20.gif);
                background-position: 0 0;
                width: 20px;
                height: 20px;
                background-position: top left;
                }
                .lookupIconOn {
                background-image: url(/img/func_icons/util/lookup20.gif);
                background-position: 0 0;
                width: 20px;
                height: 20px;
                background-position: top right;
                }
                
                .textTruncate {
                -o-text-overflow: ellipsis;   /* Opera */
                text-overflow:    ellipsis;   /* IE, Safari (WebKit) */
                overflow:hidden;              /* dont show excess chars */
                white-space:nowrap;           /* force single line */
                width: 115px;                 /* fixed width */
                }
                
                .cards{
                padding: 5px;
                box-sizing: border-box;
                }
                
                .stopImage{
                width: 10px !important;
                height: 10px !important;
                margin-top: 2px;
                float:right;
                margin-right:20px;
                //margin-left: 75px;
                }
                .activeTab{
                background-color: #16325c;
                color:white;
                background-image:none;
                font-family: "Salesforce Sans", Arial, sans-serif;
                border: none;
                }
                .inactiveTab{  
                background-color: lightgrey; 
                color:black; 
                background-image:none;
                font-family: "Salesforce Sans", Arial, sans-serif;
                border: none;
                }
                .viewCompTable{
                font-size: 14px;
                border: 2px solid black;
                border-radius: 4px;
                border-collapse: collapse;
                -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
                box-shadow: inset 0 1px 1px rgba(0,0,0,.075);
                -webkit-transition: border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;
                -o-transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
                width:100%;
                }
                .ViewCompHeaderData {
                border: 2px solid black;
                border-collapse: collapse;
                padding-top:5px;
                padding-left:5px; 
                padding-right:5px; 
                padding-bottom:5px;
                }
                .ViewCompHeader {
                font-weight: bold;
                border: 2px solid black;
                border-collapse: collapse;
                
                }
                .tableDiv{
                padding-top:15px;
                padding-left:15px; 
                padding-right:15px; 
                padding-bottom:15px;
                }
                td.wrappable,table.data_table td.wrappable, th.wrappable {
                white-space: normal;
                word-wrap: break-word!important;
                padding: 5px;
                }
                
                .componentsTableDiv{
                border-collapse: collapse;
                border: 1px solid black;
                width: 100%;
                background-color: white;
                }
                
                pre {
                white-space: pre-wrap;       /* Since CSS 2.1 */
                white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
                white-space: -pre-wrap;      /* Opera 4-6 */
                white-space: -o-pre-wrap;    /* Opera 7 */
                word-wrap: break-word;       /* Internet Explorer 5.5+ */
                }
                
                .fieldInfoIcon{
                width:14px;
                height:14px;
                }
                
                ::-webkit-input-placeholder { /* WebKit, Blink, Edge */
                color:    #cacaca;
                }
                :-moz-placeholder { /* Mozilla Firefox 4 to 18 */
                color:   #cacaca;
                opacity:  1;
                }
                ::-moz-placeholder { /* Mozilla Firefox 19+ */
                color:    #cacaca;
                opacity:  1;
                }
                :-ms-input-placeholder { /* Internet Explorer 10-11 */
                color:   #cacaca;
                }
                
                .hoverTable tr.overAllStatusRow{
                font-weight:700;
                background-color:#ecf6f8;
                
                }
                
                .hoverTable tr.dataRow:hover{
                background-color:#e3f3ff
                }
                .hoverTable #overAllStatusRow:hover{
                background-color:#ddb929
                }
                .Approved, .Success{
                background-color:#a1f78d
                }
                .Rejected, .Failed{
                background-color:#fb8a8c
                }
                .Removed, .Aborted{
                background-color: #c0bebc
                }
                .Pending{
                background-color:#ffd74b
                }
            </style>
            
            <script>
            j$ = jQuery.noConflict();   
            (function ($) {
                window.addRule = function (selector, styles, sheet) {
                    if (typeof styles !== "string") {
                        var clone = "";
                        for (var style in styles) {
                            var val = styles[style];
                            
                            style = style.replace(/([A-Z])/g, "-$1").toLowerCase(); // convert to dash-case
                            clone += style + ":" + (style === "content" ? '"' + val + '"' : val) + "; ";
                        }
                        styles = clone;
                    }
                    sheet = sheet || document.styleSheets[0];
                    if (sheet.insertRule) sheet.insertRule(selector + " {" + styles + "}", sheet.cssRules.length);
                    else if (sheet.addRule) sheet.addRule(selector, styles);
                    return this;
                };
                if ($) {
                    $.fn.addRule = function (styles, sheet) {
                        addRule(this.selector, styles, sheet);
                        return this;
                    };
                }
            }(window.jQuery));
            
            function resizePipeline(){
                j$ = jQuery.noConflict();
                j$(".slds-tabs--path__item:before").addRule({
                    width: "calc(2.2rem - (2px * 2)) !important",
                    height: "calc(3rem - (2px * 2)) !important"
                });
                
            }
            j$(document).ready(function() 
                               {        
                                   j$(".Downloadscontainer ul li ul").css("display", "none");
                                   j$(".Downloadscontainer a").click(function (e) {
                                       e.preventDefault();
                                       j$(this).closest('li').children('ul').toggle();
                                   });
                               });
            
            var countVal=0; 
            function showProgressBar(isTrue){
                console.log('Initially=='+isTrue);
                if(isTrue==true){
                    countVal=0;
                }
                else{
                    countVal=96;
                }
            }   
            
            function call(){
                countVal++;
                // console.log('countVal>>'+countVal);
                if(countVal<7){
                    var percentage=countVal*12.5;
                    // console.log('percentage>>'+percentage);
                    $('.meter > span')
                    .width(0)
                    .animate({
                        width: percentage+'%'
                    }, 500);
                }
                else{
                    $('.meter > span')
                    .width(0)
                    .animate({
                        width: '95%'
                    }, 500);
                }
            }
            
            function refresh(create){
                //alert('test');
                ('create: '+create);
                if(create === true){
                    createDeployments();
                    //console.log('call create: ');
                }
                else{
                    doNothing();
                }
            }
            
            function updateWidthAndHeight(){
                
            }
            
            function readLogs(stageName){
                readLogs(stageName);
            }
            </script>
        </head>
        <title>
            Release Management
        </title>
        <body>
            <apex:form id="frm">
                <apex:actionFunction action="{!createRecords}" name="createDeployments" reRender="errorPanel, deployPanel, pipelinePanel, logPanel, deploymentApprovalPanel"/>
                <apex:actionFunction name="doNothing" reRender="errorPanel, deployPanel, pipelinePanel, logPanel, dashboardPanel"/>
                <apex:actionFunction action="{!readStageLog}" name="readLogs" reRender="logPanel, stepLogPanel, errorPanel">
                    <apex:param name="jobName" value=""/>
                </apex:actionFunction>
                <input type="hidden" value="{!showReleaseWin}" id="showRelease"/>
                
                <c:NavHeaderComp ></c:NavHeaderComp>
                
                <div class="slds-page-header" role="banner" style="background: inherit ; padding-top: 0px;">
                    
                    <!-- Panel -->
                    <apex:outputPanel id="deployPanel" styleClass="cards">
                        <div class="slds-panel slds-grid slds-grid--vertical slds-nowrap">
                            <div class="slds-form--stacked slds-grow slds-scrollable--y">
                                <div class="slds-panel__section slds-has-divider--bottom">
                                    <div class="slds-panel__section">
                                        
                                        <h3 class="slds-text-heading--small slds-m-bottom--medium" style="margin-bottom: 0.31rem;" />
                                        <!--<div class="slds-col slds-p-horizontal_small" >
<p class="slds-text-body--regular slds-truncate">
<apex:actionStatus startText="" stopText="" id="refreshAction" > 
<apex:facet name="start" > 
<span>
<img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
</span>
</apex:facet> 
<apex:facet name="stop"> 
<apex:commandLink action="{!RefreshPage}" status="refreshAction" title="Refresh" reRender="errorPanel, deploy, deployPanel, deploymentCheckListPanel, deploymentApprovalPanel, approvalHistoryPanel, pipelinePanel" style="float:right;">
<img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/refresh_60.png')}" style="width:20px; margin-right:10px;float:right"/>
<p class="slds-text-title slds-truncate slds-m-bottom--xx-small" title="Refresh" style="float:right;">Refresh</p>
</apex:commandLink>
</apex:facet> 
</apex:actionStatus>
</p>
</div> -->

                                        <apex:outputPanel id="deploymentStatusPanel" rendered="{!if(Jenkins_Sel_JobType != JOB_TYPE_STANDALONE && selectedValidateDeployType !='QuickDeploy', true, false)}">

                                            <c:Deployment_Status_Guider id="deploymentStatusComp" reRenderItem="{!deploymentStatusGuider}" />
                                        </apex:outputPanel>
                                        <div style="{!if(Jenkins_Sel_JobType != JOB_TYPE_STANDALONE && selectedValidateDeployType !='QuickDeploy', 'width:100%; height:1px; background:grey;', 'display:none')}"></div>

                                        <div class="slds-form-element slds-hint-parent">
                                            <div class="slds-form-element__control">
                                                
                                                <ul class="slds-grid slds-page-header__detail-row">
                                                    <!-- PAGE HEADER / ROW 2 / COLUMN 3 -->
                                                    <li class="slds-page-header__detail-block">
                                                        <p class="slds-text-heading--label-normal slds-truncate slds-m-bottom--xx-small" title= "{!$Label.Select_Job}">Select Job</p>
                                                        <apex:selectList value="{!selectedOrg}" size="1" styleClass="slds-picklist" style="padding: 5px;border-radius: 3px;border-color: #ccc;">
                                                            <apex:selectOptions value="{!orgList}"></apex:selectOptions>
                                                            <apex:actionSupport action="{!selectOrg}" event="onchange" status="orgSelect" reRender="errorPanel, deploy, deployPanel, deploymentCheckListPanel, deploymentApprovalPanel, approvalHistoryPanel, pipelinePanel, deploymentStatusPanel"/> <!-- releaseRecordPanel,  -->
                                                        </apex:selectList>
                                                        <apex:actionStatus startText="" stopText="" id="orgSelect" > 
                                                            <apex:facet name="start" > 
                                                                <span style="padding-left:20%;">
                                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                                </span>
                                                            </apex:facet> 
                                                            <apex:facet name="stop">
                                                            </apex:facet> 
                                                        </apex:actionStatus>
                                                        
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>
                    <!-- /Panel -->
                    
                    <!-- Release Record Panel -->
                    <apex:outputPanel id="releaseRecordPanel-" styleClass="cards" style="{!IF(displayRelease == true, '', 'display:none;')}">
                        
                        <div class="slds-page-header bgcolor" role="banner">
                            <div class="slds-grid">
                                <div class="slds-col slds-has-flexi-truncate">
                                    <div class="slds-media slds-no-space slds-grow">
                                        <div class="slds-media__figure">
                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/signpost_120.png')}" class="sectionHeaderIcon"/>
                                        </div>
                                        <div class="slds-media__body" >
                                            <h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate" title="{!releaseObj.Name}">
                                                {!releaseObj.Name} 
                                                <a href="/{!releaseObj.Id}" target="_blank">
                                                    <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/new_window_60.png')}" style="width:15px; height:15px; vertical-align: super; font-size:6px"/>
                                                </a>
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="slds-grid slds-grid_pull-padded-medium slds-page-header__detail-row slds-wrap">
                                <div class="slds-col slds-p-horizontal_small" style="{!IF((selectedOrg == '' || Jenkins_Sel_JobType == JOB_TYPE_STANDALONE), 'display:none;', '')}">
                                    <p class="slds-text-title slds-truncate slds-m-bottom--xx-small" title="{!$Label.Manual_Step}">Deployment Checklist</p>
                                    <p class="slds-text-body--regular slds-truncate">
                                        <apex:outputPanel rendered="{!(config.CommandCenter__Manual_Steps_Required__c == false)}">
                                            <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/notApplicableNew.png')}" class="statusIcon" title="Not Applicable"/> &nbsp;
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!(config.CommandCenter__Manual_Steps_Required__c == true && manualStepsCompleted == false)}">
                                            <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/rejected.png')}" class="statusIcon" title="Not Completed"/> &nbsp;
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!(config.CommandCenter__Manual_Steps_Required__c == true && manualStepsCompleted == true)}">
                                            <apex:commandLink action="{!viewStepTrackerRecords}" status="stepTracker" reRender="stepTracker, errorPanel" style="text-decoration:none" >
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/approved.png')}" class="statusIcon" title="Completed"/> &nbsp;
                                                <apex:param name="type" value="PreDeploy"/>
                                            </apex:commandLink> 
                                        </apex:outputPanel>                                
                                        &nbsp;&nbsp;
                                        <apex:actionStatus startText="" stopText="" id="stepTracker" > 
                                            <apex:facet name="start" > 
                                                <span style="padding-left:20%;">
                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                </span>
                                            </apex:facet> 
                                            <apex:facet name="stop">
                                                <apex:commandLink action="{!viewStepTrackerRecords}" status="stepTracker" reRender="stepTracker, errorPanel" style="text-decoration:none" rendered="{!IF(manualStepsCompleted == false, true, false)}">
                                                    <img title="Update Checklist Item" src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" style="width:15px; height:15px;"/>
                                                    <apex:param name="type" value="PreDeploy"/>
                                                </apex:commandLink> 
                                            </apex:facet> 
                                        </apex:actionStatus>
                                        
                                        <apex:actionStatus startText="" stopText="" id="steps" > 
                                            <apex:facet name="start" > 
                                                <span>
                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                </span>
                                            </apex:facet> 
                                            <apex:facet name="stop"> 
                                                <apex:commandLink action="{!createManualSteps}" status="steps" title="Create New Checklist Item" reRender="steps, configPanel, errorPanel, createStepTrackerPanel" styleClass="slds-button slds-button--neutral btnAdd btn">
                                                    <img src="{!URLFOR($Resource.CommandCenter__SDLCV_2_1_3, '/assets/icons/utility/add_60.png')}" style="width:15px; height:15px;"/>
                                                </apex:commandLink>
                                            </apex:facet> 
                                        </apex:actionStatus>
                                        
                                    </p>
                                </div>
                            </div> <!-- slds-grid slds-grid_pull-padded-medium-->
                            <div class="slds-grid slds-page-header__detail-row">
                                <!-- PAGE HEADER / ROW 2 / COLUMN 3 -->
                                <div class="slds-page-header__detail-block" style="{!IF(selectedOrg == '', 'display:none;', '')}"> <!-- style="{!IF(manualStepsCompleted == true, '', 'display:none')}" -->
                                    <!-- <p class="slds-text-heading--label-normal slds-truncate slds-m-bottom--xx-small" title="Field 3"></p> -->
                                    <apex:actionStatus startText="" stopText="" id="deploy" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:0%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>                                  
                                        </apex:facet> 
                                        <apex:facet name="stop">
                                            
                                        </apex:facet> 
                                    </apex:actionStatus> &nbsp;&nbsp;&nbsp;&nbsp;
                                    <!-- <apex:commandButton action="{!triggerJenkinsJob}" oncomplete="setTimeout(refresh({!createDeployment}), 15000)" value="Start Deployment" status="deploy" reRender="deploy, errorPanel, deployPanel, pipelinePanel, logPanel, dashboardPanel, newReleasePanel" styleClass="slds-button slds-button--brand btn" style="top: 15px;{!IF(manualStepsCompleted == true, '', 'display:none')}" onclick="showProgressBar(true)"/> -->
                                    <!-- <apex:commandButton value="Start Deployment" title="Complete manual steps to enable deploy button" disabled="true" styleClass="slds-button slds-button--neutral" style="top: 15px;{!IF(manualStepsCompleted == true, 'display:none', '')}"  /> -->
                                    
                                    <span style="padding-left:0%; {!IF(jobCompleted == false && viewComponents == false && triggerJob == false , '', 'display:none;')}">
                                        <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                    </span>
                                    <apex:actionPoller enabled="{!jobCompleted == false && viewComponents == false && triggerJob == false}" action="{!checkDeploymentComponents}" interval="7" reRender="viewComponents, releaseRecordPanel, errorPanel, deployPanel, deploymentCompPanel"/>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                    <apex:commandButton value="{!if(jenkinsJob.CommandCenter__Job_Type__c == JOB_TYPE_STANDALONE, 'Start',  'Deploy')}" title="{!if(jenkinsJob.CommandCenter__Job_Type__c == JOB_TYPE_STANDALONE, 'Start Standalone Job',  'Start Deployment')}" action="{!saveDeployComments}" styleClass="slds-button slds-button--brand btn"  status="deploy" style="top: 1px;" rendered="{!if(showApprDeployBtn == true, true, false)}" reRender="deployCommentsPanel, errorPanel"/> 
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>
                    <!-- /Panel -->
                    
                    <!-- Deployment Checklist Panel -->
                    <apex:outputPanel id="deploymentCheckListPanel" styleClass="cards" style="{!IF(showDeploymentChecklist == true, '', 'display:none;')}">
                        <div class="slds-page-header bgcolor" role="banner">
                            <div class="slds-grid">
                                <div class="slds-col slds-has-flexi-truncate">
                                    <div class="slds-media slds-no-space slds-grow">
                                        <div class="slds-media__figure">
                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_form_120.png')}" class="sectionHeaderIcon"/>
                                        </div>
                                        <div class="slds-media__body" >
                                            <div class="slds-grid">
                                                <div class="slds-col">
                                                    <h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate" >
                                                        Deployment Checklist
                                                        <a href="/{!if(pendingDepApprovalList.size > 0, pendingDepApprovalList[0].Id, null)}" target="_blank">
                                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/new_window_60.png')}" style="width:15px; height:15px; vertical-align: super; font-size:6px"/>
                                                        </a>
                                                        <apex:actionStatus startText="" stopText="" id="steps1" > 
                                                            <apex:facet name="start" > 
                                                                <span>
                                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                                </span>
                                                            </apex:facet> 
                                                            <apex:facet name="stop">
                                                                
                                                            </apex:facet> 
                                                        </apex:actionStatus>
                                                    </h1>
                                                </div>
                                                <div class="slds-col">
                                                    <div style="{!if(showDepCheckListDetails == true, 'margin-top:9px; float:right', 'display:none')}" >
                                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/down_60.png')}" title="Hide Deployment Checklist" class="sectionHeaderIcon" onclick="hideDepChkContent();hideShowStatus;"  />
                                                    </div>
                                                    <div style="{!if(showDepCheckListDetails == false, 'margin-top:9px; float:right', 'display:none')}">
                                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/right_60.png')}" title="View Deployment Checklist" class="sectionHeaderIcon" onclick="showDepChkContent();" />
                                                    </div>
                                                    <apex:commandButton title="Create Checklist Item" value="Create New Checklist Item" 
                                                                        action="{!createManualSteps}" reRender="steps1, configPanel, errorPanel, createStepTrackerPanel, deploymentCheckListPanel"
                                                                        styleClass="slds-button slds-button--brand btn" style="float:right;margin-right: 20px; " rendered="{!if(showChecklistBtn == true, true, false)}">
                                                    </apex:commandButton>
                                                </div>
                                                <apex:actionFunction name="hideDepChkContent" action="{!hideDepChkLstContent}" reRender="deploymentCheckListPanel"/>
                                                <apex:actionFunction name="showDepChkContent" action="{!showDepChkLstContent}" reRender="deploymentCheckListPanel"/>  
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="{!if(showDepCheckListDetails == true, '', 'display:none')}">
                                <div class="slds-grid slds-grid_pull-padded-medium slds-page-header__detail-row slds-wrap">
                                    <div class="slds-col slds-p-horizontal_small">
                                        <table class="slds-table slds-table--bordered slds-table--cell-buffer" style="width: 100%;border-left: 1px solid #d8dde6; border-right: 1px solid #d8dde6;table-layout:fixed;">
                                            <thead>
                                                <tr class="slds-text-title--caps">
                                                    <th scope="col">
                                                        <div class="slds-truncate" title="Name">Name</div>
                                                    </th>
                                                    <th scope="col">
                                                        <div class="slds-truncate" title="Steps to Perform">Steps to Perform </div>
                                                    </th>
                                                    <th scope="col">
                                                        <div class="slds-truncate" title="Components">Components </div>
                                                    </th>
                                                    <th scope="col">
                                                        <div class="slds-truncate" title="{!jenkinsJob.CommandCenter__Job_Name__c} Complete">
                                                            <a href="/{!if(jenkinsJob!= null, jenkinsJob.id, null)}" target="_blank"><apex:outputField value="{!jenkinsJob.CommandCenter__Job_Name__c}"/></a> Complete?
                                                        </div>
                                                    </th>
                                                    <th scope="col" style="{!IF(type == 'PreDeploy', 'display:none;', '')}">
                                                        <div class="slds-truncate">
                                                            
                                                        </div>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <apex:repeat value="{!manualStepList}" var="s">
                                                    <tr>
                                                        <th scope="row" data-label="Name">
                                                            <div class="slds-truncate"><a href="/{!s.Deployment_Checklist__r.id}" target="_blank">{!s.Deployment_Checklist__r.Name}</a></div>
                                                        </th>
                                                        <td data-label="Steps to Perform">
                                                            <div class="slds-truncate" title="{!s.Deployment_Checklist__r.Steps_to_perform__c}">
                                                                {!LEFT(s.Deployment_Checklist__r.Steps_to_perform__c, 50)}
                                                                <apex:outputText value="..." rendered="{!IF(LEN(s.Deployment_Checklist__r.CommandCenter__Steps_to_perform__c)>25, true, false)}"></apex:outputText>
                                                            </div>
                                                        </td>
                                                        <td data-label="Steps to Perform">
                                                            <div class="slds-truncate" title="{!s.Deployment_Checklist__r.CommandCenter__Component__c}">
                                                                {!LEFT(s.Deployment_Checklist__r.CommandCenter__Component__c, 50)}
                                                                <apex:outputText value="..." rendered="{!IF(LEN(s.Deployment_Checklist__r.CommandCenter__Component__c)>25, true, false)}"></apex:outputText>
                                                            </div>
                                                        </td>
                                                        <td data-label="QA Complete" style="text-align:center;">
                                                            <div class="slds-truncate" >
                                                                <apex:inputCheckbox id="completedchkBox" value="{!s.CommandCenter__Is_Completed__c}" disabled="{!manualStepsCompleted}" /> 
                                                            </div>
                                                        </td>    
                                                        <td data-label="Complete" style="{!IF(type == 'PreDeploy', 'display:none;', '')}">
                                                            <div class="slds-truncate" style="text-align: center;{!IF((s.CommandCenter__Is_Completed__c == true || s.Deployment_Checklist__r.CommandCenter__Step_Type__c =='Other'), 'display:none;', '')}">
                                                                <a href="#" onclick="getFiles('{!pendingDepApprovalList[0].Id}', '{!targetId}', '{!s.Deployment_Checklist__r.CommandCenter__Step_Type__c}', '{!s.id}')">Complete</a>
                                                            </div>
                                                        </td>    
                                                    </tr>
                                                </apex:repeat>
                                                <tr style="{!IF(manualStepList.size == 0, '', 'display:none;')}">
                                                    <td scope="row" data-label="No records to display" colspan="4">
                                                        <div class="slds-truncate">No records to display</div>
                                                    </td>   
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="slds-grid slds-grid_pull-padded-medium slds-page-header__detail-row slds-wrap">   
                                    <div class="slds-col slds-p-horizontal_small">
                                        <apex:actionStatus startText="" stopText="" id="DeploymentRec" > 
                                            <apex:facet name="start" > 
                                                <span style="float:right;margin-right: 20px;">
                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                </span>
                                            </apex:facet> 
                                            <apex:facet name="stop">
                                                
                                            </apex:facet> 
                                        </apex:actionStatus>
                                        <apex:commandButton value="Next" action="{!saveStepTrackers}" styleClass="slds-button slds-button--brand btn"
                                                            status="DeploymentRec" rendered="{!if(showChecklistBtn == true, true, false)}"
                                                            reRender="DeploymentRec,steps, deploymentChecklistPanel, completedchkBox, errorPanel, deployPanel, deployCommentsPanel, deploymentStatusPanel "
                                                            style="float:right;margin-right: 5px;" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>
                    <!-- Deployment Checklist Panel -->
                    
                    <!-- Deployment record Panel -->
                    <apex:outputPanel id="deploymentApprovalPanel" styleClass="cards" style="{!IF(showDeploymentRec == true, '', 'display:none;')}">
                        <div class="slds-page-header bgcolor" role="banner">
                            <div class="slds-grid">
                                <div class="slds-col slds-has-flexi-truncate">
                                    <div class="slds-media slds-no-space slds-grow">
                                        <div class="slds-media__figure">
                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/signpost_120.png')}" class="sectionHeaderIcon"/>
                                        </div>
                                        <div class="slds-media__body" >
                                            <h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate" >
                                                Deployment Details 

                                                <a href="/{!if(pendingDepApprovalList.size > 0, pendingDepApprovalList[0].Id, '')}" target="_blank">
                                                    <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/new_window_60.png')}" style="width:15px; height:15px; vertical-align: super; font-size:6px"/>
                                                </a>
                                                <apex:actionStatus startText="" stopText="" id="viewComponents" > 
                                                    <apex:facet name="start" > 
                                                        <span style="float:right;margin-right: 5px;">
                                                            <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                        </span>
                                                    </apex:facet> 
                                                    <apex:facet name="stop">
                                                        <apex:commandButton value="View Components" action="{!checkDeploymentComponents}" styleClass="slds-button slds-button--brand btn" status="viewComponents"
                                                                            title="{!$Label.commandcenter__components_checklist}"
                                                                            reRender="viewComponents, errorPanel, deployPanel, releaseRecordPanel, deploymentApprovalPanel, deploymentCompPanel"
                                                                            style="float:right;margin-right: 5px;"
                                                                            rendered="{!if(jenkinsJob.CommandCenter__Job_Type__c != JOB_TYPE_STANDALONE && viewComponentsBtn , true, false)}">
                                                            <apex:param value="{!selectedRelease}" assignto="{!selectedReleaseId}" />
                                                        </apex:commandButton> 
                                                    </apex:facet> 
                                                </apex:actionStatus>
                                                <span style="float:right;margin-right: 5px; {!IF(jobCompleted == false && viewComponents == false && triggerJob == false , '', 'display:none;')}">
                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                </span>
                                                <apex:actionPoller enabled="{!jobCompleted == false && viewComponents == false && triggerJob == false}" action="{!checkDeploymentComponents}" interval="7" reRender="viewComponents,  releaseRecordPanel, errorPanel, deployPanel,deploymentApprovalPanel, deploymentCompPanel"/>
                                            </h1>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="slds-grid slds-grid_pull-padded-medium slds-page-header__detail-row slds-wrap">
                                <div class="slds-col">
                                    <table class="slds-table slds-table--bordered slds-table--cell-buffer slds-table--striped" style="border-left: 1px solid #d8dde6; border-right: 1px solid #d8dde6;">
                                        <thead>
                                            <tr class="slds-text-title--caps">
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Build">Build</div>
                                                </th>
                                                <th scope="col" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE, '', 'display:none')}">
                                                    <div class="slds-truncate" title="Source Branch">Source Branch</div>
                                                </th>
                                                <!--<th scope="col" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE, '', 'display:none')}">
                                                    <div class="slds-truncate" title="Target Org">Target Org</div>
                                                </th> -->
                                                <th scope="col" Style="{!If(JenkinsJob.Job_Type__c == JOB_TYPE_STANDALONE, '', 'display:none')}">
                                                    <div class="slds-truncate" title="Job URL">Job URL</div>
                                                </th>
                                                <th scope="col">
                                                    <div class="slds-truncate" title="Status">{!If(JenkinsJob.Job_Type__c == JOB_TYPE_STANDALONE, 'Job Status', 'Deployment Status')}</div>
                                                </th>
                                                <th scope="col" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE && orginalApprover != null, '', 'display:none')}">
                                                    <div class="slds-truncate" title="Approver Name" >Approver</div>
                                                </th>
                                                <th scope="col" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE && lastApprovedBy != null, '', 'display:none')}">
                                                    <div class="slds-truncate" title="Last Approved By " >Last Approved By</div>
                                                </th>
                                                <th scope="col" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE && depApprovedDt != null, '', 'display:none')}">
                                                    <div class="slds-truncate" title="Last Approved Date" >Last Approved Date</div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <apex:repeat value="{!pendingDepApprovalList}" var="dep" rendered="{!IF(pendingDepApprovalList.size > 0, true, false)}">
                                                <tr>
                                                    <td data-label="Deployment Name">
                                                        <div class="slds-truncate"><a href="/{!pendingDepApprovalList[0].Id}" target="_blank">{!dep.Name}</a></div>
                                                    </td>
                                                    <td data-label="Source Org" Style="{!If(JenkinsJob.CommandCenter__Job_Type__c != JOB_TYPE_STANDALONE, '', 'display:none')}">
                                                        <div class="slds-truncate" style="{!if(pipelineList.size > 0 && pipelineList[0].deployment.Branch_Name__c !=null, 'display:none', '')}">{!dep.CommandCenter__Source_Org__c}</div>
                                                        <div class="slds-truncate" style="{!if(pipelineList.size > 0 && pipelineList[0].deployment.Branch_Name__c !=null, '', 'display:none')}">
                                                          <apex:outputLabel title="{!pipelineList[0].deployment.Branch_Name__c}" value="{!pipelineList[0].deployment.Branch_Name__c}" rendered="{!IF(pipelineList.size > 0, true, false)}"></apex:outputLabel>  
                                                        </div>
                                                        
                                                    </td> 
                                                    <!--<td data-label="Target Org" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE, '', 'display:none')}">
                                                        <div class="slds-truncate">{!dep.Target_Org__c}</div>
                                                    </td> -->
                                                    <td data-label="Job URL" Style="{!If(JenkinsJob.Job_Type__c == JOB_TYPE_STANDALONE, '', 'display:none')}">
                                                        <div class="slds-truncate">{!JenkinsJob.Job_URL__c}</div>
                                                    </td>
                                                    <td data-label="Deployment Status">
                                                        <div class="slds-truncate " >
                                                            <apex:outputText style="{!if(dep.Status__c=='Success', 'background-color:#a1f78d', 
                                                                                    if(dep.Status__c=='Failed', 'background-color:#fb8a8c', 
                                                                                    if(dep.Status__c=='Aborted', 'background-color:#c0bebc', 
                                                                                    'background-color:#ffd74b')))}"
                                                                             value="{!dep.CommandCenter__Status__c}">
                                                            </apex:outputText>
                                                        </div>
                                                    </td> 
                                                    <td data-label="OrgApprover" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE && orginalApprover != null, '', 'display:none')}" >
                                                        <div class="slds-truncate">{!orginalApprover}</div>
                                                    </td>
                                                    <td data-label="LastApprover" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE && lastApprovedBy != null, '', 'display:none')}" >
                                                        <div class="slds-truncate">{!lastApprovedBy}</div>
                                                    </td>
                                                    <td data-label="Approver" Style="{!If(JenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE && depApprovedDt != null, '', 'display:none')}" >
                                                        <div class="slds-truncate">{!depApprovedDt}</div>
                                                    </td>
                                                </tr>
                                            </apex:repeat>
                                        </tbody>
                                    </table>
                                </div>  
                                <div class="slds-col">
                                    <p class="slds-text-body--regular slds-truncate">
                                        <apex:actionStatus startText="" stopText="" id="refreshAction" > 
                                            <apex:facet name="start" > 
                                                <span>
                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;float:right;"/> &nbsp;
                                                </span>
                                            </apex:facet> 
                                            <apex:facet name="stop"> 
                                                <apex:commandLink status="refreshAction" action="{!RefreshDeploymentRec}" title="Refresh"
                                                                  reRender="refreshAction, deploymentApprovalPanel, approvalHistoryPanel, pipelinePanel" style="float:right;"
                                                                  rendered="{!if(showRefreshLink == true, true, false)}">
                                                    <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/refresh_60.png')}" style="width:20px; margin-right:10px;float:right"/>
                                                    <p class="slds-text-title slds-truncate slds-m-bottom--xx-small" title="Refresh" style="float:right;">Refresh</p>
                                                    <apex:param name="depRecId" value="{!if(pendingDepApprovalList.size > 0, pendingDepApprovalList[0].Id, '')}" assignTo="{!refreshDepRecId}" />
                                                </apex:commandLink>
                                            </apex:facet> 
                                        </apex:actionStatus>
                                    </p>
                                </div>
                            </div>
                            <div class="slds-grid slds-grid_pull-padded-medium slds-page-header__detail-row slds-wrap">   
                                <div class="slds-col slds-p-horizontal_small">
                                    <apex:actionStatus startText="" stopText="" id="deploy1" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:0%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop">
                                            <apex:commandButton value="{!if(jenkinsJob.CommandCenter__Job_Type__c == JOB_TYPE_STANDALONE, 'Start',  'Next')}" title="{!if(jenkinsJob.CommandCenter__Job_Type__c == JOB_TYPE_STANDALONE, 'Start Standalone Job',  'Check Approval and Start Deployment')}"
                                                                action="{!saveDeployComments}" styleClass="slds-button slds-button--brand btn"  status="deploy" style="top: 1px;float:right;margin-right: 5px;" rendered="{!if(showApprDeployBtn == true && triggerJobWithoutApproval == false, true, false)}"
                                                                reRender="deployCommentsPanel, errorPanel"/> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:actionStatus startText="" stopText="" id="deploy2" > 
                                        <apex:facet name="start" > 
                                            <span style="top: 1px;float:right;margin-right: 5px;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop">
                                            <apex:commandButton value="Deploy"
                                                                action="{!checkApprovalProcess}" oncomplete="setTimeout(refresh({!createDeployment}), 15000)"
                                                                reRender="deploy2, errorPanel, deploymentApprovalPanel, approvalHistoryPanel, deploymentCheckListPanel"
                                                                status="deploy2" styleClass="slds-button slds-button--brand btn" onclick="showProgressBar(true)"
                                                                style="top: 1px;float:right;margin-right: 5px;" rendered="{!if(showDeployBtn == true && jenkinsJob.CommandCenter__Job_Type__c != JOB_TYPE_STANDALONE, true, false)}" /> 
                                            
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <span style="top: 1px;float:right;margin-right: 5px; {!if(refreshContinue == true && triggerJob == false, '', 'display:none;')}">
                                        <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                    </span>
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>
                    <!-- Deployment record Panel -->
                    
                    <!--Approval History Panel -->
                    <apex:outputPanel id="approvalHistoryPanel" styleClass="cards" style="{!IF(showApprovalHistory== true, '', 'display:none;')}">
                        <div class="slds-page-header bgcolor" role="banner">
                            <div class="slds-grid">
                                <div class="slds-col slds-has-flexi-truncate">
                                    <div class="slds-media slds-no-space slds-grow">
                                        <div class="slds-media__figure">
                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/summary_120.png')}" class="sectionHeaderIcon"/>
                                        </div>
                                        <div class="slds-media__body" >
                                            <div class="slds-grid">
                                                <div class="slds-col">
                                                    <h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate" >
                                                        Deployment Approval History
                                                        <a href="/{!if(pendingDepApprovalList.size > 0, pendingDepApprovalList[0].id, '')}" target="_blank">

                                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/new_window_60.png')}" style="width:15px; height:15px; vertical-align: super; font-size:6px"/>
                                                        </a>
                                                    </h1>
                                                </div>
                                                <div class="slds-col">
                                                    <div style="{!if(showApprHistoryDetails == true, 'margin-top:9px; float:right', 'display:none')}" >
                                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/down_60.png')}" title="Hide Approval History" class="sectionHeaderIcon" onclick="hideApprHstryContent();" />
                                                    </div>
                                                    <div style="{!if(showApprHistoryDetails == false, 'margin-top:9px; float:right', 'display:none')}">
                                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/right_60.png')}" title="View Approval History" class="sectionHeaderIcon" onclick="showApprHstryContent();" />
                                                    </div>
                                                </div>
                                                <apex:actionFunction name="hideApprHstryContent" action="{!hideApprHstryContent}" reRender="approvalHistoryPanel"/>
                                                <apex:actionFunction name="showApprHstryContent" action="{!showApprHstryContent}" reRender="approvalHistoryPanel"/>  
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="{!if(showApprHistoryDetails == true, '', 'display:none')}">
                                <div class="slds-grid slds-grid_pull-padded-medium slds-page-header__detail-row slds-wrap">
                                    <div class="slds-form-element slds-hint-parent">
                                        <div class="slds-form-element__control">
                                            <div style="width: 55%;float: left;">
                                                <table  class="slds-table slds-table--bordered slds-table--cell-buffer slds-table--striped" style="border-left: 1px solid #d8dde6; border-right: 1px solid #d8dde6;">
                                                    <tbody>
                                                        <tr class="slds-text-title--caps" > <!-- style="display:{!IF(apprStepWrapper.isSubmitForApproval,'none;','')}" -->	
                                                            <th scope="col">
                                                                <div class="slds-truncate" title="Date">Date</div>
                                                            </th>
                                                            <th scope="col">
                                                                <div class="slds-truncate" title="Status">Status</div>
                                                            </th>
                                                            <th scope="col">
                                                                <div class="slds-truncate" title="Assigned To">Assigned To</div>
                                                            </th>
                                                            <th scope="col">
                                                                <div class="slds-truncate" title="Actual Approver">Actual Approver</div>
                                                            </th>
                                                            <th scope="col">
                                                                <div class="slds-truncate" title="Comments">Comments</div>
                                                            </th>
                                                            <th scope="col">
                                                                <div class="slds-truncate" title="Overall Status">Overall Status</div>
                                                            </th>
                                                        </tr>                   
                                                        <apex:repeat value="{!apprStepWrapper.approvals}" var="s">
                                                            <tr class="overAllStatusRow dataRow" id="overAllStatusRow">
                                                                <td colspan="5" >
                                                                    <div>
                                                                        <apex:outputLabel style="color:#54698d !important;">{!IF(AND(s['listOfSteps'][0].stepstatus != 'Started', s['listOfSteps'][0].ProcessNode.Name != NULL),IF( s['listOfSteps'][0].stepstatus !='Removed','Step : '+s['listOfSteps'][0].ProcessNode.Name + IF(s['listOfSteps'][0].stepstatus=='Pending',' (Pending for first approval) ',''),'Approval Request Recalled'), 'Approval Request Submitted')}</apex:outputLabel>
                                                                    </div>
                                                                </td>
                                                                <td class="dataCell ">
                                                                    <div class="dataCell {!s['listOfSteps'][0].stepstatus}" style="text-align:center">
                                                                        <apex:outputLabel style="color:#54698d !important;">{!IF(AND(s['listOfSteps'][0].stepstatus != 'Started',s['listOfSteps'][0].stepstatus != 'NoResponse'),IF( s['listOfSteps'][0].stepstatus !='Removed',s['listOfSteps'][0].stepstatus,'Recalled'), '')}</apex:outputLabel>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                            <apex:repeat var="step" value="{!s.listOfSteps}">
                                                                <tr class="dataRow">
                                                                    <td class="dataCell">
                                                                        <apex:outputText value="{0,date,MM/dd/YYYY HH:mm:ss}">
                                                                            <apex:param value="{!step.CreatedDate}"/>
                                                                        </apex:outputText> 
                                                                    </td>
                                                                    <td class="dataCell">{!IF(step.Stepstatus!='NoResponse',step.Stepstatus,'')}</td>
                                                                    <td class="dataCell"><a href="/{!step.OriginalActorID}" target='_blank'>{!step.OriginalActor.Name}</a></td>
                                                                    <td class="dataCell"><a href="/{!step.ActorId}" target='_blank'>{!step.Actor.Name}</a></td>
                                                                    <td class="dataCell">{!step.comments}</td>
                                                                    <td></td>
                                                                </tr>
                                                            </apex:repeat>
                                                        </apex:repeat>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>            
                    <!-- Approval History -->
                    
                    <!-- Approval Submission message -->
                    <apex:outputPanel id="ApprovalMessagePanel"  style="{!IF(showApprMessagePopup == true, '', 'display:none')}">
                        <div role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open"> <!-- style="background-color:rgba(150,150,150,0.8)"  -->
                            <div class="slds-modal__container" style="width: 30% !important;">
                                <div class="slds-modal__header "> <!-- slds-modal__header slds-modal__header--empty -->
                                    <h1 id="header43" class="slds-text-heading--large">
                                        Submitted for Approval
                                    </h1>
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <div>
                                        <apex:outputText label="{!approvalPendingMsg}" value="{!approvalPendingMsg}" style="color: #54698d;"></apex:outputText>
                                    </div>
                                </div>
                                <div class="slds-modal__footer">
                                    <apex:actionStatus startText="" stopText="" id="msgPopup" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:commandButton action="{!hideMessagePopup}" value="Ok" status="msgPopup" reRender="msgPopup, ApprovalMessagePanel" styleClass="slds-button slds-button--brand btn"/>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open 1347"></div>
                    </apex:outputPanel>
                    <!-- Appproval Submission message -->
                    
                    
                    <!-- Manual Step Tracker Popup -->
            <apex:outputPanel id="stepTrackerPanel"  style="{!IF(showStepTrackers == true, '', 'display:none')}" >
            <div id="stepTrackerModal" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal--large">
                <div class="slds-modal__container" style="width: 61% !important; height: 85% !important;">
                    <div class="slds-modal__header" style="{!if(manualStepsCompleted == false, '','display:none')}">
                        <h2 id="header43" class="slds-text-heading--medium">
                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" style="width:30px; height:30px;"/>
                            Update Deployment Checklist
                        </h2>
                    </div>
                    <div class="slds-modal__header" style="{!if(manualStepsCompleted == true, '','display:none')}">
                        <h2 id="header43" class="slds-text-heading--medium">
                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" style="width:30px; height:30px;"/>
                            Completed Deployment Checklist
                        </h2>
                    </div>
                    <div class="slds-modal__content slds-p-around--medium">
                        <div>
                            <table class="slds-table slds-table--bordered slds-table--cell-buffer" style="width: 100%;border-left: 1px solid #d8dde6; border-right: 1px solid #d8dde6;">
                                <thead>
                                    <tr class="slds-text-title--caps">
                                        <th scope="col">
                                            <div class="slds-truncate" title="Name">Name</div>
                                        </th>
                                        <th scope="col">
                                            <div class="slds-truncate" title="Steps to Perform">Steps to Perform </div>
                                        </th>
                                        <th scope="col">
                                            <div class="slds-truncate" title="Components">Components </div>
                                        </th>
                                        <th scope="col">
                                            <div class="slds-truncate" title="{!jenkinsJob.CommandCenter__Job_Name__c} Complete">
                                                <a href="/{!if(jenkinsJob!= null, jenkinsJob.id, null)}" target="_blank"><apex:outputField value="{!jenkinsJob.CommandCenter__Job_Name__c}"/></a> Complete?
                                            </div>
                                        </th>
                                        <th scope="col" style="{!IF(type == 'PreDeploy', 'display:none;', '')}">
                                            <div class="slds-truncate">
                                                
                                            </div>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <apex:repeat value="{!postManualStepList}" var="s">
                                        <tr>
                                            <th scope="row" data-label="Name">
                                                <div class="slds-truncate"><a href="/{!s.Deployment_Checklist__r.id}" target="_blank">{!s.Deployment_Checklist__r.Name}</a></div>
                                            </th>
                                            <td data-label="Steps to Perform">
                                                <div class="slds-truncate" title="{!s.Deployment_Checklist__r.Steps_to_perform__c}">
                                                    {!LEFT(s.Deployment_Checklist__r.Steps_to_perform__c, 25)}
                                                   <apex:outputText value="..." rendered="{!IF(LEN(s.Deployment_Checklist__r.CommandCenter__Steps_to_perform__c)>25, true, false)}"></apex:outputText>
                                                </div>
                                            </td>
                                            <td data-label="Steps to Perform">
                                                <div class="slds-truncate" title="{!s.Deployment_Checklist__r.CommandCenter__Component__c}">
                                                    {!LEFT(s.Deployment_Checklist__r.CommandCenter__Component__c, 25)}
                                                   <apex:outputText value="..." rendered="{!IF(LEN(s.Deployment_Checklist__r.CommandCenter__Component__c)>25, true, false)}"></apex:outputText>
                                                </div>
                                            </td>
                                            <td data-label="QA Complete">
                                                <div class="slds-truncate" style="text-align: center;">
                                                    <apex:inputField id="chkIsComplete" value="{!s.CommandCenter__Is_Completed__c}"/> 
                                                </div>
                                            </td>    
                                            <td data-label="Complete" style="{!IF(type == 'PreDeploy', 'display:none;', '')}">
                                                <div class="slds-truncate" style="text-align: center;{!IF((s.CommandCenter__Is_Completed__c == true || s.Deployment_Checklist__r.CommandCenter__Step_Type__c =='Other'), 'display:none;', '')}">
                                                    <a href="#" onclick="getFiles('{!pendingDepApprovalList[0].Id}', '{!targetId}', '{!s.Deployment_Checklist__r.CommandCenter__Step_Type__c}', '{!s.id}')">Complete</a>
                                                </div>
                                            </td>    
                                        </tr>
                                    </apex:repeat>
                                    <tr style="{!IF(manualStepList.size == 0, '', 'display:none;')}">
                                        <td scope="row" data-label="No records to display" colspan="5">
                                            <div class="slds-truncate">No records to display</div>
                                        </td>   
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="slds-modal__footer">
                        <apex:actionStatus startText="" stopText="" id="status1" > 
                           <apex:facet name="start" > 
                               <span style="padding-left:30%;">
                                   <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                               </span>
                           </apex:facet> 
                           <apex:facet name="stop"> 
                           </apex:facet> 
                        </apex:actionStatus>
                        <apex:commandButton action="{!cancelStepTrackers}" value="Cancel" status="status1" reRender="status1,stepTrackerPanel, errorPanel, deployPanel, releaseRecordPanel" styleClass="slds-button slds-button--neutral"/>
                        <apex:commandButton action="{!savePostStepTrackers}" value="Save" status="status1" reRender="status1, steps,stepTrackerPanel, errorPanel, deployPanel,  releaseRecordPanel" styleClass="slds-button slds-button--brand btn"/> <!-- reRender="pipelinePanel" -- commenting option to stop spinning on save manualSteps dialog -->
                    </div>
                </div>
            </div>
            <div class="slds-backdrop slds-backdrop--open 1120"></div>
            </apex:outputPanel>
            <!-- /Popup -->
                    
                    <!-- Pipeline Panel -->
                    <script>
                    showProgressBar(false) 
                    </script>
                    <apex:outputPanel id="pipelinePanel" styleClass="cards" style="{!IF(config.CommandCenter__View_Pipeline__c == false || pipelineList.size == 0 || showPipeline == false, 'display:none;', '')}">
                        <!-- <c:InfoToolTipComponent toolTipText="{!releaseObj.Name}  help Text here !" toolTipTextClassName="jenkin_Config" icon_Margin_Top="25" icon_Margin_Left="-4"
position_Left="-61" position_Bottom="-24"  toolTipWidth="140"/> -->
                        <!--      
<c:InfoToolTipComponent toolTipText="Latest Build History !" toolTipTextClassName="jenkin_Config" icon_Margin_Top="26" icon_Margin_Left="-10"
position_Left="-41" position_Bottom="-23"  toolTipWidth="120"/>
-->
                        <div class="slds-page-header bgcolor" role="banner">
                            <div class="slds-grid">
                                <div class="slds-col slds-has-flexi-truncate">
                                    <div class="slds-media slds-no-space slds-grow">
                                        <div class="slds-media__figure">
                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/process_60.png')}" class="sectionHeaderIcon"/>
                                        </div>
                                        <div class="slds-media__body" >
                                            <h1 class="slds-page-header__title slds-m-right--small slds-align-middle slds-truncate">
                                                <apex:outputLabel value="Last " rendered="{!IF(refreshContinue == false, true, false)}"></apex:outputLabel> Build
                                                <apex:commandButton title="{!$Label.commandcenter__release_notes}" value="Generate Release Notes"

                                                                    oncomplete="window.open('/apex/ReleaseNotes?dId={!if(pendingDepApprovalList.size > 0, pendingDepApprovalList[0].id, '')}&oid={!selectedOrg}')"

                                                                    styleClass="slds-button slds-button--brand btn" style="float:right;"
                                                                    rendered="{!IF((refreshContinue == false && includePMOToolKit == true && jenkins_Sel_JobType != JOB_TYPE_STANDALONE && getReleaseNotes == true), true, false)}"/> 
                                                &nbsp;&nbsp;&nbsp;
                                                <apex:commandButton title="Complete post deployment activities" value="Post Deployment Steps" 
                                                                    action="{!viewPostStepTrackerRecords}" reRender="stepTracker, errorPanel, stepTrackerPanel"
                                                                    styleClass="slds-button slds-button--brand btn" style="float:right;margin-right: 5px;"
                                                                    rendered="{!IF((refreshContinue == false && showPostdepReleaseNotes == true && Jenkins_Sel_JobType != JOB_TYPE_STANDALONE && postDeployStepExist == true), true, false)}">
                                                    <apex:param name="type" value="PostDeploy"/>
                                                </apex:commandButton>
                                                
                                            </h1>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Add content Here -->
                            <ul class="slds-grid slds-page-header__detail-row">
                                
                                <li class="slds-page-header__detail-block releaseSection" style="max-width: 100% !important;width: 100%;">
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom" style="border-bottom: 0px;">
                                        <div class="slds-form-element__control" style="{!IF(pipelineList.size > 0, 'display:none;', '')}">
                                            <div class="slds-grid"> 
                                                <span style="padding-top: 5px;font-size: 13px;"> No pipeline to display  </span>
                                            </div>
                                        </div>
                                        
                                        <div class="slds-form-element__control" style="{!IF(pipelineList.size > 0, '', 'display:none;')}">
                                            
                                            <apex:repeat value="{!pipelineList}" var="v">
                                                <div class="slds-grid"> 
                                                    <span class="slds-box buildInfo">
                                                        <span>
                                                            <div>
                                                                <span class="font-weight-bold"><apex:outputLabel value="Last" rendered="{!IF(refreshContinue == false, true, false)}"></apex:outputLabel>
                                                                    {!v.deployment.Name}  </span><br/>
                                                                <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/user_60.png')}" class="buildInfoIcons"/>
                                                                <apex:outputText value="{!v.deployment.CommandCenter__Pipeline_Owner__c}" style="font-size:10px;"></apex:outputText>   <br/>
                                                                <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/clock_60.png')}" class="buildInfoIcons"/>
                                                                <apex:outputText value="{0, date, MM/dd/yyyy}" style="font-size:10px;">
                                                                    <apex:param value="{!v.deployment.CreatedDate}"/>
                                                                </apex:outputText> <br/>
                                                                <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/clock_60.png')}" class="buildInfoIcons"/>
                                                                <apex:outputText value="{0, time, hh:mm:ss a}" style="font-size:10px;">
                                                                    <apex:param value="{!v.deployment.CreatedDate}"/>
                                                                </apex:outputText>
                                                            </div>
                                                        </span>
                                                    </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                    <apex:actionStatus startText="" stopText="" id="refreshPipeline" > 
                                                        <apex:facet name="start" > 
                                                            <span style="padding-left:0%;">
                                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                            </span>
                                                        </apex:facet> 
                                                        <apex:facet name="stop"> 
                                                            <script>
                                                            call()  
                                                            </script> 
                                                        </apex:facet> 
                                                    </apex:actionStatus><!-- {!refreshContinue} -->
                                                    <apex:actionPoller status="refreshPipeline" enabled="{!refreshContinue}" action="{!refresh}" interval="7" reRender="refreshPipeline, logPanel, pipelinePanel, dashboardPanel, dashboardPanel1, releaseRecordPanel, deployPanel, deploymentApprovalPanel, deploymentStatusPanel"/>
                                                    
                                                    <!-- Code for the new table starts -->                                            
                                                    <apex:actionStatus startText="" stopText="" id="viewJobStatus1" > 
                                                        <apex:facet name="start" > 
                                                            <span style="padding-left:0%;">
                                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                            </span>
                                                        </apex:facet> 
                                                        <apex:facet name="stop"> 
                                                        </apex:facet> 
                                                    </apex:actionStatus>
                                                    
                                                    <div id ="tablecontent1" style="{!if(!showContent,"display:block;padding-left: 32px;","display:none")};" class= "slds-scope">
                                                        <table id = "tablecontent" class="slds-table slds-table--bordered slds-table--cell-buffer" style="border-left: 1px solid #d8dde6; border-right: 1px solid #d8dde6;">                                             
                                                            <tr class="slds-text-title_caps">
                                                                <th scope="col" style="slds-text-heading--label slds-truncate wk_table">
                                                                    <div class="slds-truncate slds-text-heading--label" title="Job Name" style= "padding-left: 64px;">Job Name</div>
                                                                </th>                                       
                                                                <th scope="col">
                                                                    <div class="slds-truncate slds-text-heading--label" style = "padding-left: 27px;padding-right: 27px;" title="Job Result">Job Result</div>
                                                                </th>                                       
                                                                <th scope="col">
                                                                    <div class="slds-truncate slds-text-heading--label" style = "height: 15px;padding-right: 99px;padding-left: 50px;" title="Job Artifact">Job Artifact</div>
                                                                </th>                                       
                                                            </tr>                                                                                
                                                            <apex:repeat value="{!v.orderList}" var="order">  
                                                                <apex:repeat value="{!order.stageList}" var="s">
                                                                    <tr style="{!if(s.stageclass == "slds-is-hidden", 'display:none;','')}"><!-- Fix for Orderlist issue, after removing hardcoded values-->
                                                                        <td style = "padding-right: 49px;">
                                                                            <span class="slds-tabs--path__stage slds-assistive-text">
                                                                                <span style="{!IF(s.displayName == true, 'padding-left: 6px;
                                                                                             padding-right: 9px;', 'display:none')}">{!s.Stage.Stage_Label__c} </span>
                                                                            </span>
                                                                            <span style="{!IF(s.displayName == true, '    padding-left: 6px;
                                                                                         padding-right: 9px;', 'display:none')}">
                                                                                
                                                                                {!s.Stage.Stage_Label__c}
                                                                                <script>
                                                                                resizePipeline()
                                                                                </script>
                                                                            </span>
                                                                        </td>
                                                                        <td>
                                                                            <p class="slds-text-body--regular slds-truncate" style = "padding-left: 36px;">
                                                                                <apex:outputPanel rendered="{!(s.stage.CommandCenter__Status__c == 'Failure' && s.displayName == true)}">
                                                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/rejected.png')}" class="statusIcon" title="Failed"/> &nbsp;
                                                                                </apex:outputPanel>
                                                                                
                                                                                <apex:outputPanel rendered="{!(s.stage.CommandCenter__Status__c == 'Success' && s.displayName == true)}">
                                                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/approved.png')}" class="statusIcon"  title="Passed"/> &nbsp;
                                                                                </apex:outputPanel>
                                                                                
                                                                                <apex:outputPanel rendered="{!(s.stage.CommandCenter__Status__c == 'Aborted' && s.displayName == true)}">
                                                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/stop.png')}" class="statusIcon"  title="Aborted"/> &nbsp;
                                                                                </apex:outputPanel>
                                                                                
                                                                                
                                                                                <apex:actionStatus startText="" stopText="" id="stepTracker" > 
                                                                                    <apex:facet name="start" > 
                                                                                        <span style="padding-left:20%;">
                                                                                            <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                                                        </span>
                                                                                    </apex:facet>
                                                                                </apex:actionstatus>
                                                                            </p>
                                                                        </td>
                                                                        <td>
                                                                            <apex:commandLink action="{!readStageLog}" value="View Details" style="padding-left: 61px;" rendered="{!if(s.stageclass != 'slds-is-incomplete', true, false)}"
                                                                                              status="viewJobStatus1" reRender="viewJobStatus1, logPanel, stepLogPanel, errorPanel" title="{!IF(s.displayName == true, s.Stage.CommandCenter__Stage_Label__c, '')}">
                                                                                <apex:param name="jobName" value="{!s.Stage.Id}"/>                                                   
                                                                            </apex:commandLink>                                                
                                                                        </td>                                                          
                                                                    </tr>                                              
                                                                </apex:repeat>   
                                                            </apex:repeat>   
                                                            
                                                        </table>
                                                    </div>
                                                    <!-- Code for the new table ends --> 
                                                    
                                                    
                                                    <div id="maintab" class="slds-tabs--path" style="{!if(showContent,"padding-left:10px;width: 90%","display:none")};" role="application">
                                                        
                                                        <apex:actionStatus startText="" stopText="" id="viewJobStatus" > 
                                                            <apex:facet name="start" > 
                                                                <span style="padding-left:0%;">
                                                                    <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                                                </span>
                                                            </apex:facet> 
                                                            <apex:facet name="stop"> 
                                                            </apex:facet> 
                                                        </apex:actionStatus>
                                                        
                                                        <apex:repeat value="{!v.orderList}" var="order">
                                                            
                                                            <ul class="slds-tabs--path__nav" role="tablist" id="list">
                                                                <apex:repeat value="{!order.stageList}" var="s">
                                                                    
                                                                    <li class="slds-tabs--path__item {!s.stageClass}" role="presentation">
                                                                        
                                                                        <apex:commandLink styleClass="slds-tabs--path__link" action="{!readJobLog}" status="viewJobStatus" reRender="viewJobStatus, logPanel, progressiveLogPanel, errorPanel" title="{!IF(s.displayName == true, s.Stage.CommandCenter__Stage_Label__c, '')}"> <!-- action="{!readStageLog}" -->
                                                                            <apex:param name="jobName" value="{!s.Stage.Id}"/>
                                                                            <span class="slds-tabs--path__stage">
                                                                                <span style="{!IF(s.displayName == true, '', 'display:none')}">{!s.Stage.CommandCenter__Stage_Label__c} </span>
                                                                            </span>
                                                                            <span class="slds-tabs--path__title textTruncate" style="{!IF(s.displayName == true, '', 'display:none')}">
                                                                                
                                                                                {!s.Stage.CommandCenter__Stage_Label__c}
                                                                                <script>
                                                                                resizePipeline()
                                                                                </script>
                                                                            </span>
                                                                        </apex:commandLink>
                                                                        
                                                                        <apex:outputPanel rendered="{!IF((s.Stage.CommandCenter__Status__c == 'In Progress' && s.displayName == true), true,false)}">
                                                                            <apex:commandLink action="{!stopPipelineJob}" reRender="tablecontent1,refreshPipeline,logPanel, pipelinePanel, dashboardPanel, dashboardPanel1, deploymentApprovalPanel">
                                                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/stop.png')}" class="stopImage" title="Abort this job"/>
                                                                                <apex:param name="stageUrl" value="{!s.stage.CommandCenter__Stage_URL__c}"/>
                                                                                <apex:param name="buildNumber" value="{!s.stage.CommandCenter__Build_Number__c}"/>
                                                                            </apex:commandLink>
                                                                        </apex:outputPanel> 
                                                                        
                                                                        <!-- <apex:outputPanel rendered="{!IF((s.Stage.Status__c == 'Aborted' && s.displayName == true), true,false)}">
<apex:commandLink action="{!startPipelineJob}" reRender="refreshPipeline, logPanel, pipelinePanel, dashboardPanel, dashboardPanel1">
<img src="{!URLFOR($Resource.RM_Resource, '/rm_images/re_run.png')}" class="stopImage" style="width: 12px !important;height: 12px !important;" title="Rebuild job"/>
<apex:param name="stageUrl" value="{!s.stage.CommandCenter__Stage_URL__c}"/>
<apex:param name="buildNumber" value="{!s.stage.CommandCenter__Build_Number__c}"/>
<apex:param name="jobId" value="{!s.stage.Id}"/>
</apex:commandLink>
</apex:outputPanel> -->
                                                                        
                                                                    </li>                                                
                                                                </apex:repeat>
                                                            </ul>
                                                            <div style="height:10px;">
                                                            </div>
                                                        </apex:repeat>                                          
                                                    </div>
                                                </div>
                                                <br/>
                                            </apex:repeat>
                                            
                                            
                                            <div style="margin-left: 10%;padding-left: 15px;">
                                                <a href="/apex/RelaseHistory?oid={!selectedOrg}" target="_blank">View History </a>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>                  
                            <!-- /Add content Here -->
                        </div>
                    </apex:outputPanel>
                    <!-- /Panel -->
                    
                    <!-- Deployment Comments Popup -->
                    <apex:outputPanel id="deployCommentsPanel" style="{!if(createdDeploymentRec == true, '', 'display:none')}" >
                        <div id="deployCommentsModal" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal--medium">
                            <div class="slds-modal__container" style="width: 40% !important;">
                                <div class="slds-modal__header" >
                                    <h2 id="header43" class="slds-text-heading--medium">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" style="width:30px; height:30px;"/>
                                        {!if(jenkinsJob.Job_Type__c == JOB_TYPE_STANDALONE, 'Add Standalone Job Comments',  'Add Deployment Notes')}
                                    </h2>
                                </div>
                                
                                <div class="slds-modal__content slds-p-around--medium" >
                                    <div class="slds-form--stacked">
                                        <div class="slds-form-element" style="{!if(jenkinsJob.Job_Type__c == JOB_TYPE_STANDALONE, 'display:none',  '')}">
                                            <label class="slds-form-element__label" for="input-01">Test Level</label>
                                            <div class="slds-form-element__control">
                                                <apex:selectList value="{!selectedTestLevel}" size="1" styleClass="slds-input" style=" width: 90% !important;">
                                                    <apex:selectOptions value="{!testLevelLst}"></apex:selectOptions>
                                                    <apex:actionSupport event="onchange" reRender="deployCommentsPanel" />
                                                </apex:selectList>
                                            </div>
                                        </div>
                                        <div class="slds-form-element" style="{!if(jenkinsJob.Job_Type__c != JOB_TYPE_STANDALONE && selectedTestLevel == TEST_LEVEL_RUNSPECIFIEDCLASS, '',  'display:none')}">
                                            <label class="slds-form-element__label" for="input-01">Run Specified Test Classes <abbr class="slds-required" title="required">* </abbr>
                                                <!--<a href="#" data-toggle="tooltip" data-container="body" title="Please enter test classes separated by comma"> <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/info_60.png')}"  class="fieldInfoIcon"/></a> --></label>
                                            <div class="slds-form-element__control">
                                                <apex:input value="{!runSpecifiedTestClass}" styleClass="slds-input" html-placeholder="Please enter test classes separted by comma" style="{!IF(selectedTestLevel== TEST_LEVEL_RUNSPECIFIEDCLASS && runSpecifiedTestClass== null && fieldRequired == true, 'width: 90% !important;border-color:red', 'width: 90% !important;')}"/>
                                                <div id="error-message" class="slds-form-element__help" style="color:red; {!IF((selectedTestLevel== TEST_LEVEL_RUNSPECIFIEDCLASS && runSpecifiedTestClass == null && fieldRequired == true), '', 'display:none;')}">{!errorMessage}</div>
                                            </div>
                                        </div>
                                        <div class="slds-form-element" style="{!if(jenkinsJob.Job_Type__c == JOB_TYPE_STANDALONE, '',  'display:none')}">
                                            <label class="slds-form-element__label" for="input-01" >Action Type</label>
                                            <div class="slds-form-element__control">
                                                <apex:selectList value="{!selectedValidateDeployType}" size="1" styleClass="slds-input" style=" width: 90% !important;">
                                                    <apex:selectOptions value="{!ValidateDeployLst}"></apex:selectOptions>
                                                    <apex:actionSupport event="onchange" reRender="deployCommentsPanel" />
                                                </apex:selectList>
                                            </div>
                                        </div>
                                        <div class="slds-form-element">
                                            <label class="slds-form-element__label" for="input-01" style="{!if(jenkinsJob.CommandCenter__Job_Type__c == JOB_TYPE_STANDALONE, 'display:none',  '')}">Deployment Comments</label>
                                            <label class="slds-form-element__label" for="input-01" style="{!if(jenkinsJob.CommandCenter__Job_Type__c != JOB_TYPE_STANDALONE, 'display:none',  '')}">Comments</label>
                                            <div class="slds-form-element__control">
                                                <apex:inputTextarea value="{!deployComment}" rows="3" styleClass="slds-textarea" html-placeholder="{!if(jenkinsJob.CommandCenter__Job_Type__c == JOB_TYPE_STANDALONE, '', 'Add deployment notes here ... [e.g. Deployment related to change# CR-0001 or defect# D-0001,  Approved by:XXXXXXX...]')}" style="width: 90%;"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="slds-modal__footer">

                                    <apex:actionStatus startText="Fetching Components" stopText="" id="checkDepComponents" > 
										<apex:facet name="start" > 
                                            <span style="margin-left:5px; float:left;">
                                                Fetching Components...
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                            <apex:commandButton value="View Components" action="{!checkDeploymentComponents}" styleClass="slds-button slds-button--brand btn"
                                                                status="checkDepComponents" title="{!$Label.commandcenter__components_checklist}"
                                                                reRender="checkDepComponents, errorPanel, deployCommentsPanel, deploymentCompPanel" 
                                                                rendered="{!if(jenkinsJob.CommandCenter__Job_Type__c != JOB_TYPE_STANDALONE && viewComponentsBtn , true, false)}"
                                                                style="margin-left:5px; float:left;">
                                                <apex:param assignTo="{!ViewComponentsPopup}" value="True" name="ViewComponentsPopup" />
                                            </apex:commandButton> 
                                           
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <span style="margin-left:5px; float:left; {!IF(jobCompleted == false && viewComponents == false && triggerJob == false && viewComponentsPopup == true , '', 'display:none;')}">
                                        <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                    </span>
                                   <apex:actionPoller enabled="{!jobCompleted == false && viewComponents == false && triggerJob == false && viewComponentsPopup == true}" action="{!checkDeploymentComponents}" interval="7"
                                                               reRender="checkDepComponents, viewComponentsPopup, errorPanel, deploymentCompPanel, deployCommentsPanel"
                                                               status="checkDepComponents" />
                                    
									<apex:actionStatus startText="" stopText="" id="commentStatus" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop">  
                                            <apex:commandButton action="{!cancelDeployComments}" value="Cancel" status="commentStatus" reRender="commentStatus, deployCommentsPanel" styleClass="slds-button slds-button--neutral"/>
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:actionStatus startText="" stopText="" id="commentStatus1" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop">  
                                            <!--<apex:commandButton value="{!if(jenkinsJob.Job_Type__c == JOB_TYPE_STANDALONE, 'Start Job',  'Deploy')}" action="{!triggerJenkinsJob}" oncomplete="setTimeout(refresh({!createDeployment}), 15000)" reRender="commentStatus1,deployCommentsPanel, maintab, errorPanel, releaseRecordPanel, pipelinePanel, dashboardPanel, newReleasePanel" status="commentStatus" styleClass="slds-button slds-button--brand btn" onclick="showProgressBar(true)" />  -->
                                            <apex:commandButton value="Deploy" action="{!checkApprovalProcess}"
                                                                oncomplete="triggerJobWithoutApproval1()" 
                                                                reRender="commentStatus1,deployCommentsPanel, errorPanel, deploymentCheckListPanel, deploymentApprovalPanel, approvalHistoryPanel, ApprovalMessagePanel"
                                                                status="commentStatus" styleClass="slds-button slds-button--brand btn" onclick="showProgressBar(true)" rendered="{!if(jenkinsJob.CommandCenter__Job_Type__c != JOB_TYPE_STANDALONE, true, false)}"/> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:actionStatus startText="" stopText="" id="commentStatus2" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop">  
                                            <apex:commandButton value="Start Job" action="{!checkApprovalProcess}"
                                                                oncomplete="setTimeout(refresh({!createDeployment}), 15000)" 
                                                                reRender="commentStatus2,deployCommentsPanel, errorPanel, deploymentCheckListPanel, deploymentApprovalPanel, approvalHistoryPanel, ApprovalMessagePanel"
                                                                status="commentStatus2" styleClass="slds-button slds-button--brand btn" onclick="showProgressBar(true)" rendered="{!if(jenkinsJob.CommandCenter__Job_Type__c == JOB_TYPE_STANDALONE, true, false)}" /> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:actionFunction name="triggerJobWithoutApproval1" oncomplete="setTimeout(refresh({!createDeployment}), 15000)" action="{!triggerJenkinsJob}"
                                                         rendered="{!if(triggerJobWithoutApproval == true, true, false)}"
                                                         reRender="deploymentCheckListPanel"/> 
                                      
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open 1120"></div>
                    </apex:outputPanel>
                    
                    <!-- Log Popup -->
                    <apex:outputPanel id="deploymentCompPanel"  style="{!IF(viewComponents == true && jobCompleted == true, '', 'display:none')}" >
                        <script type="text/javascript">
                        j$ = jQuery.noConflict();
                        j$(document).ready(function() 
                                           {
                                               j$(".Downloadscontainer ul li ul").css("display", "none");
                                               j$(".Downloadscontainer a").click(function (e) {
                                                   e.preventDefault();
                                                   j$(this).closest('li').children('ul').toggle();
                                               });
                                           });
                        </script> 
                        <div id="depCompModal" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal--small">
                            <div class="slds-modal__container" style="width: 96% !important;height: 80% !important;">
                                <div class="slds-modal__header">
                                    <h4 id="header43" class="slds-text-heading--medium" style="font-weight:bold;">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/knowledge_base_60.png')}" class="sectionHeaderIcon"/>
                                        Deployment Components
                                    </h4>
                                </div>
                                <div class="slds-modal__content slds-p-around--medium" style="height: 65%;">
                                    
                                    <!-- Show Workspace --><!-- Show User Stories & Components -->
                                    <div>
                                        <apex:tabPanel id="viewCompTab" switchType="client" selectedTab="workspaceTab" activeTabClass="activeTab" inactiveTabClass="inactiveTab">
                                            <apex:tab id="workspaceTab" label="WorkSpace" >
                                                <p>&nbsp;</p>
                                                <div>
                                                    <div class="Downloadscontainer">
                                                        <apex:repeat value="{!artifactMap}" var="root">
                                                            <ul class="slds-tree" role="tree">
                                                                <li role="treeitem" aria-level="1">
                                                                    <div>
                                                                        <a href="#" style="text-decoration:none;">
                                                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/open_folder_60.png')}" class="sectionHeaderIcon"/>
                                                                            {!root}
                                                                        </a>&nbsp;&nbsp;
                                                                        <a href="#" onclick="window.open('{!jenkinsJob.On_Demand_Validation_Job_URL__c}/ws/Deploy/dist/*zip*/dist.zip')" target="_blank" style="text-decoration:none;">
                                                                            Download &nbsp;
                                                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/download_60.png')}" class="sectionHeaderIcon"/>
                                                                        </a>
                                                                    </div>
                                                                    <apex:repeat value="{!artifactMap[root]}" var="folder">
                                                                        <ul>
                                                                            <li role="treeitem" aria-level="2">
                                                                                <div class="slds-tree__item" style="padding-left: 2rem;">
                                                                                    <a href="#" style="{!IF(contains(folder, 'z_'), 'display:none;', '')}">
                                                                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/open_folder_60.png')}" class="treeIcon" style="{!IF(contains(folder, 'z_'), 'display:none;', '')}"/>
                                                                                        <!-- <apex:outputText value="{!IF(contains(folder, 'z_'), SUBSTITUTE(folder, 'z_', ''), folder)}"></apex:outputText> -->
                                                                                        {!folder}
                                                                                    </a>
                                                                                    <a href="#" style="{!IF(contains(folder, 'z_'), '', 'display:none;')}" onclick="window.open('{!jenkinsJob.On_Demand_Validation_Job_URL__c}/ws/Deploy/dist/{!IF(contains(folder, 'z_'), SUBSTITUTE(folder, 'z_', ''), folder)}')" target="_blank">
                                                                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/doctype/txt_60.png')}" class="treeIcon" style="{!IF(contains(folder, 'z_'), '', 'display:none;')}"/>
                                                                                        <apex:outputText value="{!IF(contains(folder, 'z_'), SUBSTITUTE(folder, 'z_', ''), folder)}"></apex:outputText>
                                                                                    </a>
                                                                                </div>
                                                                                <apex:repeat value="{!artifactMap[root][folder]}" var="file">
                                                                                    <ul>
                                                                                        <li role="treeitem" aria-level="3">
                                                                                            <div class="slds-tree__item" style="padding-left: 3.5rem;">
                                                                                                <a href="#" onclick="window.open('{!jenkinsJob.On_Demand_Validation_Job_URL__c}/ws/Deploy/dist/{!folder}/{!file}')" target="_blank" style="text-decoration:none;">
                                                                                                    <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/doctype/txt_60.png')}" class="treeIcon"/>
                                                                                                    {!file}
                                                                                                </a>
                                                                                            </div>
                                                                                        </li>
                                                                                    </ul>
                                                                                </apex:repeat>
                                                                            </li>
                                                                        </ul>
                                                                    </apex:repeat>
                                                                </li>
                                                            </ul>
                                                        </apex:repeat>
                                                    </div>
                                                </div>
                                                <p>&nbsp;</p>
                                            </apex:tab>
                                            <apex:tab id="userStoryTab" label="User Stories" rendered="{!IF(includePMOToolKit == true, true, false)}">
                                                <p>&nbsp;</p>
                                                <div class= "slds-scope" style="overflow-x:auto;"> <!-- style="page-break-after:always;" -->
                                                    <table id="UsrStryTable" border="1" class="slds-table slds-table--cell-fixed " > <!--  class="componentsTableDiv"-->
                                                        <thead>
                                                            <tr class="slds-text-title_caps" >
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label" >Sr. No.</div>
                                                                </th>
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label" >User Story</div>
                                                                </th>
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label" >Components</div>
                                                                </th>
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label" >Commit Message</div>
                                                                </th>
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label" >Committed By</div>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody >
                                                            <apex:variable value="{!0}" var="index" />
                                                            <apex:repeat value="{!usrStryLst}" var="uKey" rendered="{!IF(usrStryLst.size > 0, true, false)}">
                                                                <tr>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:outputText >
                                                                                <apex:variable value="{!index + 1}" var="index" />
                                                                                {!index}
                                                                            </apex:outputText>
                                                                        </div>
                                                                    </td>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:outputText value="{!uKey.CommandCenter__User_Story_Name__c}"/>
                                                                        </div>
                                                                    </td>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <apex:repeat value="{!uKey}" var="cKey">
                                                                            <apex:outputText value="{!cKey.Name}"/><br/> 
                                                                        </apex:repeat>
                                                                    </td>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:repeat value="{!uKey}" var="cKey">
                                                                                <apex:outputText value="{!cKey.CommandCenter__Commit_Message__c}"/><br/> 
                                                                            </apex:repeat>
                                                                        </div>
                                                                    </td>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:repeat value="{!uKey}" var="cKey">
                                                                                <apex:outputText value="{!cKey.CommandCenter__Committer_Name__c}"/><br/> 
                                                                            </apex:repeat>
                                                                        </div>
                                                                    </td> 
                                                                </tr>
                                                            </apex:repeat> 
                                                        </tbody>
                                                        <tbody style="{!IF(usrStryLst.size == 0, '', 'display:none;')}">
                                                            <tr>
                                                                <td colspan="5"><i class="fa fa-warning"></i>{!$Label.No_records_found}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table> 
                                                </div>
                                            </apex:tab>
                                            <apex:tab id="defectsTab" label="Defects" rendered="{!IF(includePMOToolKit == true, true, false)}">
                                                <p>&nbsp;</p>
                                                <div class= "slds-scope" style="overflow-x:auto;"> <!-- style="display:{!if(defLst.size > 0,"block","none")};" -->
                                                    <table border="1" class="slds-table slds-table--cell-fixed" > <!--  componentsTableDiv class="slds-table slds-table--cell-fixed" -->
                                                        <thead>
                                                            <tr class="slds-text-title_caps">
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label">Sr. No.</div>
                                                                </th>
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label">Defects</div>
                                                                </th>
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label">Components</div>
                                                                </th>
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label">Commit Message</div>
                                                                </th>
                                                                <th scope="col" style="slds-text-heading--label" class="wrappable">
                                                                    <div class="slds-text-heading--label">Committed By</div>
                                                                </th>
                                                            </tr>
                                                        </thead>
                                                        <tbody >
                                                            <apex:variable value="{!0}" var="index" />
                                                            <apex:repeat value="{!defLst}" var="dKey" rendered="{!IF(defLst.size > 0, true, false)}">
                                                                <tr>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:outputText >
                                                                                <apex:variable value="{!index + 1}" var="index" />
                                                                                {!index}
                                                                            </apex:outputText>
                                                                        </div>   
                                                                    </td>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:outputText value="{!dKey.CommandCenter__Defect_Name__c}"/>
                                                                        </div>
                                                                    </td>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:repeat value="{!dKey}" var="cKey1">
                                                                                <apex:outputText value="{!cKey1.name}"/><br/> 
                                                                            </apex:repeat>
                                                                        </div>
                                                                    </td>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:repeat value="{!dKey}" var="cKey1">
                                                                                <apex:outputText value="{!cKey1.CommandCenter__Commit_Message__c}"/><br/> 
                                                                            </apex:repeat>
                                                                        </div>
                                                                    </td>
                                                                    <td class="slds-cell-wrap wrappable">
                                                                        <div>
                                                                            <apex:repeat value="{!dKey}" var="cKey1">

                                                                                <apex:outputText value="{!cKey1.CommandCenter__Committer_Name__c}"/><br/> 
                                                                            </apex:repeat>
                                                                        </div>
                                                                    </td> 
                                                                </tr>
                                                            </apex:repeat> 
                                                        </tbody>
                                                        <tbody style="{!IF(defLst.size == 0, '', 'display:none;')}">
                                                            <tr>
                                                                <td colspan="5"><i class="fa fa-warning"></i>{!$Label.No_records_found}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table> 
                                                </div>
                                            </apex:tab>
                                        </apex:tabPanel>
                                    </div>
                                    <!-- /Show Workspace -->
                                </div>
                                <!--<apex:actionFunction name="updateTbl" oncomplete="updateTable();" reRender="viewCompTab">
</apex:actionFunction> -->
                                <script>
                                /*j$ = jQuery.noConflict();
                        j$(document).ready(function(){
                            j$('#UsrStryTable').hide();
                            updateTbl();
                            
                        });
                        function updateTable(){
                            j$('#UsrStryTable').dataTable({
                                "ordering": false,
                                
                                "order": [[ 2, "desc" ]]
                            });
                            window.alert = function() {};
                            
                        }*/
                                </script> 
                                <div class="slds-modal__footer">
                                    <apex:actionStatus startText="" stopText="" id="exitDepComp" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:commandButton action="{!exitViewComponent}" value="Close" status="exitDepComp" reRender="exitDepComp, deploymentCompPanel, viewComponents, viewcomponentsPopup, deployCommentsPanel" styleClass="slds-button slds-button--brand btn"/>
                                </div>
                            </div>
                            
                        </div>
                        <div class="slds-backdrop slds-backdrop--open 1317"></div>
                    </apex:outputPanel>
                    <!-- /Popup -->
                    
                    <!-- Progressive Log Popup -->
                    <apex:outputPanel id="progressiveLogPanel"  style="{!IF(showProgressiveLog == true, '', 'display:none')}" >
                        <script type="text/javascript">
                        j$ = jQuery.noConflict();
                        j$(document).ready(function(){
                            //var logPosition = j$( "#stepLogDiv" ).scrollTop();
                            j$( "#progressiveLogDiv" ).scrollTop( 100000 );
                            //alert('@TK:'+logPosition);
                        });
                        </script>
                        <div id="progressiveLogModal" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal--large">
                            <div class="slds-modal__container" style="width: 96% !important;">
                                <div class="slds-modal__header">
                                    <h4 id="header43" class="slds-text-heading--medium" style="font-weight:bold;">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/knowledge_base_60.png')}" class="sectionHeaderIcon"/>
                                        {!logStageName} - Log 
                                    </h4>
                                </div>
                                <div id= "progressiveLogDiv" class="slds-modal__content slds-p-around--medium" style="height: 65%;">
                                    <!-- Show Log -->
                                    <apex:outputText id="pLogResult" style="width:100%"> 
                                        <pre> {!logResultString}</pre>
                                    </apex:outputText>
                                    <apex:actionPoller enabled="{!log_OffsetMoreData == 'true' && showProgressiveLog == true}" action="{!readJobLog}" interval="7" reRender="progressiveLogPanel, errorPanel"/> 
                                    <!-- Show Workspace -->
                                    <br/><br/><br/><br/><br/><br/>
                                    <div style="{!if(strLmtExceeded == true, '', 'display:none')}">
                                        <span style="font-style:italic;font-size:12px;"> **{!$Label.commandcenter__string_limit_exceeded_log_message}</span>
                                    </div>
                                </div>
                                <div class="slds-modal__footer">
                                    <apex:actionStatus startText="" stopText="" id="pCancelLog" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:repeat value="{!newdocList}" var="d">
                                        <a href="/apex/showLog?docId={!d.doc.Id}" target="_blank" title="Open {!d.doc.Name}" style="{!IF(contains(d.doc.Name, '.html'), '', 'display:none')}">
                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/doctype/')}{!fileTypeMap[d.fileType]}" class="sectionHeaderIcon"/>
                                        </a>
                                        
                                        <a href="/servlet/servlet.FileDownload?file={!d.doc.Id}" target="_blank" title="{!IF(contains(d.doc.Name, '.log'), 'Open '+ d.doc.Name,  'Download '+ d.doc.Name)}" style="{!IF(contains(d.doc.Name, '.html'), 'display:none', '')}">
                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/doctype/')}{!fileTypeMap[d.fileType]}" class="sectionHeaderIcon"/>
                                        </a>
                                        
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                    </apex:repeat>
                                    <apex:commandButton action="{!exitProgressiveLog}" value="Close" status="pCancelLog" reRender="pCancelLog, progressiveLogPanel" styleClass="slds-button slds-button--brand btn"/>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open 1317"></div>
                    </apex:outputPanel>
                    
                    <!-- Log Popup -->
                    <apex:outputPanel id="stepLogPanel"  style="{!IF(showLog == true, '', 'display:none')}" >
                        <script type="text/javascript">
                        j$ = jQuery.noConflict();
                        j$(document).ready(function() 
                                           {
                                               j$(".Downloadscontainer ul li ul").css("display", "none");
                                               j$(".Downloadscontainer a").click(function (e) {
                                                   e.preventDefault();
                                                   j$(this).closest('li').children('ul').toggle();
                                               });
                                           });
                        </script> 
                        <div id="stepLogModal" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal--large">
                            <div class="slds-modal__container" style="width: 96% !important;">
                                <div class="slds-modal__header">
                                    <h4 id="header43" class="slds-text-heading--medium" style="font-weight:bold;">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/knowledge_base_60.png')}" class="sectionHeaderIcon"/>
                                        {!logStageName} - Log
                                    </h4>
                                </div>
                                <div id= "stepLogDiv" class="slds-modal__content slds-p-around--medium" style="height: 65%;">
                                    <!-- Show Log -->

                                    <div style="{!IF(contains(LOWER(logStageName), 'release') 
                                                || contains(LOWER(logStageName), 'diff') 
                                                || contains(LOWER(logStageName), 'tas') 
                                                || (contains(LOWER(logStageName), LOWER('deploy_CI')) && deploymentId != null), 
                                                'display:none;', '')}" > <!-- (contains(LOWER(logStageName), 'validation') && deploymentId != null) || -->
                                        <apex:outputText id="logResult" style="width:100%;"> 
                                            <pre> {!logString}</pre>
                                        </apex:outputText>
                                    </div> 
                                    <!-- Show Log -->
                                    <!-- Show TAS Summary -->
                                    <div style="{!IF(contains(LOWER(logStageName), 'tas'), '', 'display:none;')}">
                                        <h2 class="slds-text-title--caps" style="font-size: 1rem;margin-left: 5%;" id="treeheading">
                                            TAS Test Cases:
                                        </h2>
                                        <br/>
                                        <div style="margin-left: 5%;"> 
                                            <apex:outputText value="{!summary}" escape="false"></apex:outputText>
                                        </div>
                                    </div>
                                    <!-- Show Summary -->
                                    <!-- Show Validation/Deploy CI Summary -->
                                    <div style="{!IF(((contains(LOWER(logStageName), LOWER('deploy_CI'))) && deploymentId != null), '', 'display:none;')}"> <!-- contains(LOWER(logStageName), 'validation')  ||  -->

                                        <h2 class="slds-text-title--caps" style="font-size: 1rem;margin-left: 30%;" id="treeheading">
                                            Deployment Status:
                                        </h2>
                                        <br/>
                                        <div style="margin-left: 5%;">
                                            <apex:outputPanel rendered="{!IF((contains(LOWER(logStageName), 'validation')  || contains(LOWER(logStageName), LOWER('deploy_CI'))) && (failureList.size == 0),true, false)}">  <!-- (ISNULL(failureList)) -->
                                                <script>
                                                FusionCharts.ready(function () {
                                                    var revenueChart = new FusionCharts({
                                                        type: 'doughnut3d',
                                                        renderAt: 'chart-container',
                                                        width: '500',
                                                        height: '450',
                                                        dataFormat: 'json',
                                                        dataSource: {
                                                            "chart": {
                                                                "caption": "Deployment Details",
                                                                "subCaption": "",
                                                                "paletteColors": "#0075c2,#1aaf5d,#f2c500,#f45b00,#8e0000,#36486b,#77a8a8,#96897f,#5b9aa0,#622569,#c83349,#588c7e",
                                                                "bgColor": "#ffffff",
                                                                "showBorder": "0",
                                                                "use3DLighting": "0",
                                                                "showShadow": "0",
                                                                "enableSmartLabels": "0",
                                                                "startingAngle": "310",
                                                                "showLabels": "0",
                                                                "showPercentValues": "0",
                                                                "showLegend": "1",
                                                                "legendShadow": "0",
                                                                "legendBorderAlpha": "0",                                
                                                                "decimals": "0",
                                                                "captionFontSize": "14",
                                                                "subcaptionFontSize": "14",
                                                                "subcaptionFontBold": "0",
                                                                "toolTipColor": "#ffffff",
                                                                "toolTipBorderThickness": "0",
                                                                "toolTipBgColor": "#000000",
                                                                "toolTipBgAlpha": "80",
                                                                "toolTipBorderRadius": "2",
                                                                "enableMultiSlicing": "0",
                                                                "toolTipPadding": "5",
                                                                "showPercentInToolTip":"0",
                                                                "showValues":"0",
                                                                "pieRadius": "160",
                                                                "defaultCenterLabel": "Total Components: {!totalComp}",
                                                                
                                                            },
                                                            "data":{!chartDataString}
                                                        }
                                                    }).render();
                                                    
                                                    if('{!chartTestData}' != '[]'){
                                                        generateTestResultChart();
                                                    }
                                                });
                                                
                                                function generateTestResultChart(){
                                                    var revenueChart = new FusionCharts({
                                                        type: 'doughnut3d',
                                                        renderAt: 'chart-container-test',
                                                        width: '500',
                                                        height: '450',
                                                        dataFormat: 'json',
                                                        dataSource: {
                                                            "chart": {
                                                                "caption": "Deployment Details",
                                                                "subCaption": "",
                                                                "numberPrefix": "",
                                                                "paletteColors": "#0075c2,#1aaf5d,#f2c500,#f45b00,#8e0000",
                                                                "bgColor": "#ffffff",
                                                                "showBorder": "0",
                                                                "use3DLighting": "0",
                                                                "showShadow": "0",
                                                                "enableSmartLabels": "0",
                                                                "startingAngle": "310",
                                                                "showLabels": "0",
                                                                "showPercentValues": "0",
                                                                "showLegend": "1",
                                                                "legendShadow": "0",
                                                                "legendBorderAlpha": "0",                                
                                                                "decimals": "0",
                                                                "captionFontSize": "14",
                                                                "subcaptionFontSize": "14",
                                                                "subcaptionFontBold": "0",
                                                                "toolTipColor": "#ffffff",
                                                                "toolTipBorderThickness": "0",
                                                                "toolTipBgColor": "#000000",
                                                                "toolTipBgAlpha": "80",
                                                                "toolTipBorderRadius": "2",
                                                                "toolTipPadding": "5",
                                                            },
                                                            "data": [
                                                                {
                                                                    "label": "Food",
                                                                    "value": "1"
                                                                }
                                                            ] 
                                                        }
                                                    }).render();
                                                }
                                                </script>
                                                <div id="chart-container" style="float:left;"></div>
                                                <!-- <div id="chart-container-test" style="float:right;"></div> -->
                                            </apex:outputPanel>
                                            
                                        </div>
                                    </div>
                                    <!-- Show Summary -->
                                    
                                    <!-- Show Summary -->
                                    <div style="{!IF(contains(LOWER(logStageName), 'release'), '', 'display:none;')}">
                                        <h2 class="slds-text-title--caps" style="font-size: 1rem;margin-left: 30%;" id="treeheading">
                                            Deployed Components in Target Environment:
                                        </h2>
                                        <br/>
                                        <div style="margin-left: 25%;">
                                            <apex:outputText value="{!summary}" escape="false"></apex:outputText>
                                        </div>
                                    </div>
                                    <!-- Show Summary -->
                                    <!-- Show Env Diff Summary -->
                                    <div style="{!IF(contains(LOWER(logStageName), 'diff'), '', 'display:none;')}">
                                        <h2 class="slds-text-title--caps" style="font-size: 1rem;margin-left: 30%;" id="treeheading">Environment Difference Output:</h2>
                                        <br/>
                                        <div style="margin-left: 20%;width: 50%;">
                                            <apex:outputText value="{!summary}" escape="false"></apex:outputText>
                                        </div>
                                    </div>
                                    <!-- Show Summary -->
                                    
                                    <!-- Show Workspace -->
                                    <div style="{!IF((contains(LOWER(logStageName), 'validation')  || contains(LOWER(logStageName), LOWER('deploy_CI'))) && (NOT(ISNULL(failureList)) && failureList.size != 0) , '', 'display:none;')}">
                                        <a href="/apex/ExportErrors?d={!deploymentId}&a={!authId}&i={!instanceURL}" target="_blank">
                                            <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/doctype/excel_60.png')}" class="sectionHeaderIcon" title="Export to Excel" align="right"/>
                                        </a>
                                        <apex:pageBlock title="Component Failures:" rendered="{!NOT(ISNULL(failureList)) && failureList.size != 0}">
                                            <apex:pageBlockTable value="{!failureList}" var="obj" title="Failures:" border="1" columns="5" rendered="{!NOT(ISNULL(failureList))}" >
                                                <apex:column >
                                                    <apex:facet name="header">Line#</apex:facet>
                                                    {!obj.lineNumber}
                                                </apex:column>
                                                <apex:column >
                                                    <apex:facet name="header">Problem</apex:facet> 
                                                    {!obj.problem} 
                                                </apex:column>
                                                <apex:column >
                                                    <apex:facet name="header">Problem Type</apex:facet>
                                                    {!obj.problemType} 
                                                </apex:column>
                                                <apex:column >
                                                    <apex:facet name="header">Component Type</apex:facet>
                                                    {!obj.componentType}
                                                </apex:column>
                                                <apex:column >
                                                    <apex:facet name="header">File Name</apex:facet>
                                                    {!obj.fileName}
                                                </apex:column>
                                                
                                            </apex:pageBlockTable>
                                        </apex:pageBlock>
                                        
                                        
                                    </div> 
                                    
                                    <!-- /Show Workspace -->
                                    <!-- <br/><br/><br/><br/><br/><br/>
<div style="{!if(strLmtExceeded == true, '', 'display:none')}">
<span style="font-style:italic;font-size:12px;"> **{!$Label.String_Limit_Exceeded_Log_Message}</span>
</div> -->
                                    
                                </div>
                                <div class="slds-modal__footer">
                                    <apex:actionStatus startText="" stopText="" id="cancelLog" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:repeat value="{!newdocList}" var="d">
                                        <span style="{!IF(d.attachmentStoredInFiles == false, '', 'display:none')}">
                                            <a href="/apex/showLog?docId={!d.docId}" target="_blank" title="Open {!d.doc.Name}" style="{!IF(contains(d.doc.Name, '.html'), '', 'display:none')}">
                                                <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/doctype/')}{!fileTypeMap[d.fileType]}" class="sectionHeaderIcon"/>
                                            </a>
                                            
                                            <a href="/servlet/servlet.FileDownload?file={!d.docId}" target="_blank" title="{!IF(contains(d.doc.Name, '.log'), 'Open '+ d.doc.Name,  'Download '+ d.doc.Name)}" style="{!IF(contains(d.doc.Name, '.html') , 'display:none', '')}">
                                                <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/doctype/')}{!fileTypeMap[d.fileType]}" class="sectionHeaderIcon"/>
                                            </a>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                        </span>
                                        <span style="{!IF(d.attachmentStoredInFiles == true, '', 'display:none')}">
                                            <a href="https://cc--ccltngdev.cs70.my.salesforce.com/sfc/servlet.shepherd/version/download/{!d.docId}" target="_blank" title="Download {!d.doc.Name}">
                                                <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/doctype/')}{!fileTypeMap[d.fileType]}" class="sectionHeaderIcon"/>
                                            </a>
                                            &nbsp;&nbsp;&nbsp;&nbsp;
                                        </span>
                                    </apex:repeat>
                                    <apex:commandButton action="{!exitLog}" value="Close" status="cancelLog" reRender="cancelLog, stepLogPanel" styleClass="slds-button slds-button--brand btn"/>
                                </div>
                            </div>
                            
                        </div>
                        <div class="slds-backdrop slds-backdrop--open 1317"></div>
                    </apex:outputPanel>
                    <!-- /Popup -->
                    
                    <!-- ERROR Popup -->
                    <apex:outputPanel id="errorPanel"  style="{!IF(isError == true, '', 'display:none')}" >
                        <div role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container" style="width: 30% !important;">
                                <div class="slds-modal__header slds-modal__header slds-modal__header--empty">
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <div>
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/error_60.png')}" style="width:30px; height:30px;"/>
                                        Error: {!errorMessage}
                                    </div>
                                </div>
                                <div class="slds-modal__footer">
                                    <apex:actionStatus startText="" stopText="" id="okStatus" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:commandButton action="{!hideErrorPopup}" value="Ok" status="okStatus" reRender="okStatus, errorPanel" styleClass="slds-button slds-button--brand btn"/>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open 1347"></div>
                    </apex:outputPanel>
                    <!-- /ERROR Popup -->
                    
                    <!-- New Release Popup -->
                    <apex:outputPanel id="newReleasePanel" style="{!IF(showReleaseWin == true, '', 'display:none')}" >
                        <div id="newReleaseModal" role="dialog" tabindex="-1" style="background-color:rgba(150,150,150,0.8)" aria-labelledby="header43" class="slds-modal slds-fade-in-open">               
                            <div class="slds-modal__container" style="width: 85% !important;">
                                <div class="slds-modal__header">
                                    <h2 id="header43" class="slds-text-heading--medium">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" class="sectionHeaderIcon"/>
                                        Create New Release
                                    </h2>
                                </div>                    
                                <div class="slds-modal__content slds-p-around--medium">
                                    <script>
                                    $(function(){
                                        $( ".myPicker" ).datepicker({
                                            changeMonth: true,//this option for allowing user to select month
                                            changeYear: true //this option for allowing user to select from year range
                                        });
                                        
                                    });
                                    </script>
                                    <abbr class="slds-required" title="required">* All fields are required</abbr>
                                    <div id="error-message" class="slds-form-element__help" style="color:red;"></div>
                                    <div class="slds-form--stacked">                                    
                                        <div id="error-message" class="slds-form-element__help" style="color:red; {!IF((isError == true), '', 'display:none;')}">
                                            Error: {!errorMessage}
                                        </div>
                                        <fieldset class="slds-form--compound">
                                            <div class="slds-form-element__group">
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element slds-size--1-of-2">
                                                        <label class="slds-form-element__label" for="input-01">Name</label>                                         
                                                        <apex:inputText value="{!Rel.Name}" html-placeholder="Release Name" styleClass="slds-input" />  
                                                        <div id="error-message" class="slds-form-element__help" style="color:red; {!IF((Rel.Name== null && isError == true), '', 'display:none;')}">
                                                            {!errorMessage}
                                                        </div>
                                                    </div>
                                                    <div class="slds-form-element slds-size--1-of-2" style="margin-top: 0rem;">
                                                        <label class="slds-form-element__label" for="input-02">Release Start Date</label>
                                                        <apex:inputField value="{!Rel.CommandCenter__Release_Start_Date__c}" styleClass="slds-input myPicker" id="myPicker"  />
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                        
                                        <fieldset class="slds-form--compound">
                                            <div class="slds-form-element__group">
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element slds-size--1-of-2">
                                                        <label class="slds-form-element__label" for="input-01">Release Planned End Date</label>                                         
                                                        <apex:inputField value="{!Rel.CommandCenter__Release_Planned_End_Date__c}" styleClass="slds-input myPicker" />
                                                        
                                                    </div>
                                                    <div class="slds-form-element slds-size--1-of-2" style="margin-top: 0rem;">
                                                        <label class="slds-form-element__label" for="input-02">Release Actual End Date</label>
                                                        <apex:inputField value="{!Rel.CommandCenter__Release_Actual_End_Date__c}" styleClass="slds-input myPicker"/>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                        
                                        <fieldset class="slds-form--compound">
                                            <div class="slds-form-element__group">
                                                <div class="slds-form-element__row">
                                                    <div class="slds-form-element slds-size--1-of-2">
                                                        <label class="slds-form-element__label" for="input-01">Description</label>                                         
                                                        <apex:inputField value="{!Rel.CommandCenter__Description__c}" styleClass="slds-input" />
                                                        
                                                    </div>
                                                    <div class="slds-form-element slds-size--1-of-2" style="margin-top: 0rem;">
                                                        <label class="slds-form-element__label" for="input-02">Comments</label>
                                                        <apex:inputField value="{!Rel.CommandCenter__Status_Update__c}" styleClass="slds-input"/>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>
                                        <!--  <fieldset class="slds-form--compound">
<label class="slds-checkbox">
<apex:inputField value="{!Rel.Deployment_Approval_Required__c}"/>
<span class="slds-checkbox--faux"></span>
<span class="slds-form-element__label">Deployment Approval Required</span>
</label>
<label class="slds-checkbox">
<apex:inputField value="{!Rel.On_Demand_Validation_Needed__c}"/>
<span class="slds-checkbox--faux"></span>
<span class="slds-form-element__label">On-Demand Validation Needed</span>
</label> 
</fieldset>--> <!-- As ondemand validate job from jenkins can be used to validate the deployment anytime, this functionality is not required -->
                                        
                                    </div>
                                </div>                     
                                <div class="slds-modal__footer">
                                    <apex:actionStatus startText="" stopText="" id="releaseStatus" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:commandButton action="{!hideNewRelease}" value="Cancel" status="releaseStatus" reRender="releaseStatus, deployPanel, newReleasePanel" styleClass="slds-button slds-button--neutral"/>
                                    <apex:commandButton action="{!saveRelease}" status="releaseStatus" reRender="releaseStatus, deployPanel, newReleasePanel" value="Save" styleClass="slds-button slds-button--brand"/>
                                </div>                    
                            </div>                
                        </div>    
                    </apex:outputPanel>
                    <!-- /ERROR Popup -->
                    
                    <!-- Manual Step Tracker Popup -->
                    <apex:outputPanel id="createStepTrackerPanel" style="{!IF(showStepTrackers1 == true, '', 'display:none')}" >
                        <div id="stepTrackerModal" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open">
                            <div class="slds-modal__container" style="width: 35% !important;">
                                <div class="slds-modal__header">
                                    <h2 id="header43" class="slds-text-heading--medium">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" class="sectionHeaderIcon"/>
                                        Create New Checklist Item
                                    </h2>
                                </div>
                                <div class="slds-modal__content slds-p-around--medium">
                                    <div class="slds-form--stacked">
                                        <!--Temporary Workaround: Due to removal of salesforce environments, temporarily removing step type - create custom setting, permission sets
											which uses SF enviornment username password oauth mechanism -->
                                        <!--<div class="slds-form-element">
                                            <label class="slds-form-element__label">Type </label>
                                            <div class="slds-form-element__control">
                                                <apex:selectList value="{!stepType}" size="1" styleClass="slds-input">
                                                    <apex:selectOptions value="{!stepTypeList}"></apex:selectOptions>
                                                </apex:selectList>
                                            </div>
                                        </div> -->
                                        <div class="slds-form-element">
                                            <label class="slds-form-element__label">Steps to Perform <abbr class="slds-required" title="required">*</abbr></label>
                                            <div class="slds-form-element__control">
                                                <apex:inputField value="{!manualStep.CommandCenter__Steps_to_perform__c}" styleClass="slds-textarea" html-placeholder="Example: Deactivate Account Trigger" style="width: 90%;{!IF((manualStep.CommandCenter__Steps_to_perform__c == null && fieldRequired == true), 'border-color:red', '')}"/>
                                            </div>
                                            <div id="error-message" class="slds-form-element__help" style="color:red; {!IF((manualStep.Steps_to_perform__c == null && fieldRequired == true), '', 'display:none;')}">This field is required</div>
                                        </div>
                                        <div class="slds-form-element">
                                            <label class="slds-form-element__label">Components <abbr class="slds-required" title="required">*</abbr></label>
                                            <div class="slds-form-element__control">
                                                <apex:inputField value="{!manualStep.CommandCenter__Component__c}" styleClass="slds-textarea" html-placeholder="Example: Account Trigger" style="width: 90%;{!IF((manualStep.CommandCenter__Component__c == null && fieldRequired == true), 'border-color:red', '')}"/>
                                            </div>
                                            <div id="error-message" class="slds-form-element__help" style="color:red; {!IF((manualStep.Component__c == null && fieldRequired == true), '', 'display:none;')}">This field is required</div>
                                        </div>
                                        <div class="slds-form-element">
                                            <label class="slds-form-element__label">Pre/Post Deploy?</label>
                                            <div class="slds-form-element__control">
                                                <apex:selectList value="{!recTypeId}" size="1" styleClass="slds-input">
                                                    <apex:selectOptions value="{!recTypeList}"></apex:selectOptions>
                                                </apex:selectList>
                                            </div>
                                        </div>
                                        <fieldset class="slds-form-element">
                                            <legend class="slds-form-element__legend slds-form-element__label">Applicable Jobs</legend>
                                            <div class="slds-form-element__control">
                                                <apex:repeat value="{!rmJobList}" var="org">
                                                    <label class="slds-checkbox">
                                                        <apex:inputCheckbox value="{!org.isSelected}"/>
                                                        <span class="slds-checkbox--faux"></span>
                                                        <span class="slds-form-element__label">{!org.rmJob.Job_Name__c}</span>
                                                    </label>
                                                </apex:repeat>
                                            </div>
                                        </fieldset>
                                    </div>
                                </div>
                                <div class="slds-modal__footer">
                                    <apex:actionStatus startText="" stopText="" id="createSteps" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!$Resource.ProcessingIcon}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:commandButton action="{!cancelStepTrackersCreate}" value="Cancel" status="createSteps" reRender="createSteps, createStepTrackerPanel, deployPanel, releaseRecordPanel, deploymentCheckListPanel" styleClass="slds-button slds-button--neutral"/>
                                    <apex:commandButton action="{!createStepTrackers}" value="Save" status="createSteps" reRender="createSteps, createStepTrackerPanel, deployPanel, releaseRecordPanel, deploymentCheckListPanel" styleClass="slds-button slds-button--brand btn"/>
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open 1521"></div>
                    </apex:outputPanel>
                    
                    <!-- Permission Set Assignment section -->
                    <apex:outputPanel id="permissionSetAssignmentPanel"  style="{!IF(showPermissions == true, '', 'display:none')}" >
                        <div id="permissionSetAssignmentModal" role="dialog" tabindex="-1" aria-labelledby="header43" class="slds-modal slds-fade-in-open slds-modal--large">
                            <div class="slds-modal__container" style="width: 75% !important; height: 85% !important;">
                                <div class="slds-modal__header">
                                    <h2 id="header43" class="slds-text-heading--medium">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" style="width:30px; height:30px;"/>
                                        Assign Permission Sets
                                    </h2>
                                </div>
                                <div class="slds-modal__content slds-p-around--large">
                                    <div>
                                        <c:AssignPermissionSets envId="{!jobsMap[selectedOrg].Target_Environment__c}" rendered="{!IF(jobsMap != null && selectedOrg != null && showPermissions == true, true, false)}"></c:AssignPermissionSets>
                                    </div>
                                </div>
                                <div class="slds-modal__footer">
                                    <apex:actionStatus startText="" stopText="" id="finishPermissions" > 
                                        <apex:facet name="start" > 
                                            <span style="padding-left:30%;">
                                                <img src="{!URLFOR($Resource.RM_Resource, '/rm_images/process.gif')}" style="width:30px; height:30px;"/> &nbsp;
                                            </span>
                                        </apex:facet> 
                                        <apex:facet name="stop"> 
                                        </apex:facet> 
                                    </apex:actionStatus>
                                    <apex:commandButton action="{!cancelPSAssignment}" value="Cancel" status="finishPermissions" reRender="finishPermissions, permissionSetAssignmentPanel, stepTrackerPanel" styleClass="slds-button slds-button--neutral btn"/>
                                    <apex:commandButton action="{!finishPSAssignment}" value="Finish" status="finishPermissions" reRender="finishPermissions, permissionSetAssignmentPanel, stepTrackerPanel" styleClass="slds-button slds-button--brand btn"/>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="slds-backdrop slds-backdrop--open 1120"></div>
                    </apex:outputPanel>
                    
                    <!-- Create custom settings data -->
                    <!-- Section 1 - View Files List -->
                    <div>
                        <section id="viewFileModal" class="slds-modal slds-modal--medium" role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1">
                            <div class="slds-modal__container">
                                <header class="slds-modal__header">
                                    <h2 id="header43" class="slds-text-heading--medium">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" style="width:30px; height:30px;"/>
                                        Select Files
                                    </h2>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="fileListContent">
                                    
                                </div>
                                <footer class="slds-modal__footer">
                                    <button class="slds-button slds-button--neutral">Cancel</button>
                                    <button onclick="fetchFilesData(); return false;" class="slds-button slds-button--brand btn">Next</button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop" id="backdrop"></div>
                    </div>
                    <!-- /Section 1 - View Files List -->
                    
                    <!-- Section 2 - View Files Data -->
                    <div>
                        <section id="viewFileDataModal" class="slds-modal slds-modal_large" role="dialog" tabindex="-1" aria-labelledby="modal-heading-02" aria-modal="true" aria-describedby="modal-content-id-2">
                            <div class="slds-modal__container" style="width: 75% !important;max-width: 75rem !important;">
                                <header class="slds-modal__header">
                                    <h2 id="header43" class="slds-text-heading--medium">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" style="width:30px; height:30px;"/>
                                        Verify File Content
                                    </h2>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="fileDataContent">
                                    
                                </div>
                                <footer class="slds-modal__footer">
                                    <button class="slds-button slds-button--neutral">Cancel</button>
                                    <button onclick="createData(); return false;" class="slds-button slds-button--brand btn">Create</button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop" id="backdropfd"></div>
                    </div>
                    <!-- /Section 2 - View Files Data -->
                    <!-- Section 1 - View Files List -->
                    <div>
                        <section id="viewCSResult" class="slds-modal slds-modal--large" role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1">
                            <div class="slds-modal__container">
                                <header class="slds-modal__header">
                                    <h2 id="header43" class="slds-text-heading--medium">
                                        <img src="{!URLFOR($Resource.SDLCV_2_1_3, '/assets/icons/utility/edit_60.png')}" style="width:30px; height:30px;"/>
                                        Result
                                    </h2>
                                </header>
                                <div class="slds-modal__content slds-p-around_medium" id="csResult">
                                    
                                </div>
                                <footer class="slds-modal__footer">
                                    <button onclick="finish(); return false;" class="slds-button slds-button--brand btn">Finish</button>
                                </footer>
                            </div>
                        </section>
                        <div class="slds-backdrop" id="resBackdrop"></div>
                    </div>
                    <!-- /Section 1 - View Files List -->
                    <!-- /Create custom settings data -->
                    
                </div>
                <!-- / PAGE HEADER -->
                
                <apex:actionFunction name="assignPermissions" action="{!completeManualActivities}" reRender="permissionSetAssignmentPanel">
                    <apex:param name="type" value=""/>
                    <apex:param name="id" value=""/>
                </apex:actionFunction>
                
                <apex:actionFunction name="completeActivity" action="{!finishActivityCompletion}"  reRender="stepTrackerPanel1">
                    <apex:param name="id" value=""/>
                </apex:actionFunction>
                
                <script type="text/javascript">
                
                function finish(){
                    completeActivity(stepId);
                    document.getElementById("viewCSResult").classList.remove('slds-fade-in-open');
                    document.getElementById("resBackdrop").classList.remove('slds-fade-in-open');
                }
                
                function viewFileList(){
                    document.getElementById("backdrop").classList.add('slds-backdrop_open');
                    document.getElementById("viewFileModal").classList.add('slds-fade-in-open');
                    document.getElementById("stepTrackerModal").classList.remove('slds-fade-in-open');
                    
                }
                
                function hideFileList(){
                    document.getElementById("viewFileModal").classList.remove('slds-fade-in-open');
                    document.getElementById("backdrop").classList.remove('slds-backdrop_open');
                }
                
                function viewFileData(){
                    document.getElementById("backdropfd").classList.add('slds-backdrop_open');
                    document.getElementById("viewFileDataModal").classList.add('slds-fade-in-open');
                }
                
                function hideFileData(){
                    document.getElementById("viewFileDataModal").classList.remove('slds-fade-in-open');
                    document.getElementById("backdropfd").classList.remove('slds-backdrop_open');
                }
                
                var orgId;
                var stepId;
                function getFiles(depObjId, targetOrgId, stepType, stepIdVal){
                    orgId = targetOrgId;
                    stepId = stepIdVal;
                    console.log('*** dep Obj Id *** '+depObjId+' *** orgID *** '+orgId+' *** Step Id *** '+stepId);
                    if(stepType === "Create Custom Settings"){
                        Visualforce.remoting.Manager.invokeAction(
                            '{!$RemoteAction.DeployController.fetchFiles}', 
                            depObjId,
                            function(result, event){
                                console.log('*** result0 *** '+result);
                                if(event.status){
                                    console.log('*** result *** '+result);
                                    document.getElementById("fileListContent").innerHTML = generateFileListTable(result);
                                    viewFileList();
                                }
                                else{
                                    console.log('*** Error *** '+event.message);
                                }
                            }
                        )
                    }
                    else if(stepType === "Assign Permission Sets"){
                        //document.getElementById("psaBackdrop").classList.add('slds-backdrop_open');
                        //document.getElementById("viewPSA").classList.add('slds-fade-in-open');
                        assignPermissions(stepType, stepId);
                        document.getElementById("stepTrackerModal").classList.remove('slds-fade-in-open');
                    }
                }
                
                function generateFileListTable(fileList){
                    var script = document.createElement('script');script.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js";
                    document.getElementsByTagName('head')[0].appendChild(script);
                    var inrTable = '<table border="0" cellpadding="0" cellspacing="0" class="slds-table slds-table--bordered slds-table--cell-buffer" role="grid" aria-describedby="FileListTable">'
                    inrTable += '<thead><tr role="row" class="slds-text-title_caps">';
                    inrTable += '<th class="name sorting_disabled" scope="col">';
                    inrTable += '<div class="slds-truncate"></div></th>';
                    inrTable += '<th class="name sorting_asc" scope="col">';
                    inrTable += '<div class="slds-truncate">File Name</div></th>';
                    inrTable += '</tr></thead><tbody>';
                    
                    for(var i=0; i<fileList.length; i++){
                        inrTable += '<tr role="row" class="odd">';
                        inrTable += '<td class="name" scope="col"><input type="checkbox" class="checkboxClass" checked onclick="addRemoveData(\''+fileList[i].Id+'\', $(this));"></td>';
                        inrTable += '<td class="name sorting_1" scope="col"><div class="slds-truncate">'+fileList[i].Name+'</div></td>';
                        inrTable += '</tr>';
                        
                        //Add values to map
                        filesMap.set(fileList[i].Id, fileList[i].Name);
                        selectedFilesMap.set(fileList[i].Id, fileList[i].Name);
                    }
                    /*
            $.each(fileList, function(index, value){ 
                inrTable += '<tr role="row" class="odd">';
                inrTable += '<td class="name" scope="col"><input type="checkbox" class="checkboxClass" checked onclick="addRemoveData(\''+value.Id+'\', $(this));"></td>';
                inrTable += '<td class="name sorting_1" scope="col"><div class="slds-truncate">'+value.Name+'</div></td>';
                inrTable += '</tr>';
                
                //Add values to map
                filesMap.set(value.Id, value.Name);
                selectedFilesMap.set(value.Id, value.Name);
            });
            */
                    inrTable += '</tbody></table>';
                    
                    return inrTable;
                }
                
                var filesMap = new Map();
                var selectedFilesMap = new Map();
                
                function addRemoveData(id, checkbox){
                    //Check if checkbox is selected
                    if(checkbox.is(':checked')){
                        //Check if tmpMetadataMap contains selected value
                        if(selectedFilesMap.has(id)){
                            //If contains, dont add value
                        }
                        else{
                            console.log('** adding key *** '+id);
                            selectedFilesMap.set(id, filesMap.get(id));
                        }
                    }
                    //If checkbox is unchecked
                    else{
                        //Check if tmpMetadataMap contains the value
                        if(selectedFilesMap.has(id)){
                            //If contains, remove value
                            selectedFilesMap.delete(id);
                            console.log('** removing key *** '+id);
                        }
                        else{
                            //dont do anything
                        }
                    }
                }
                
                var fileIds = new Array();
                function fetchFilesData(){
                    selectedFilesMap.forEach(getMapKeys);
                    console.log('*** inside fetchFilesData *** '+fileIds );
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.DeployController.fetchFilesData}',
                        fileIds ,
                        function(result, event){
                            if(event.status){
                                console.log('*** Files Data *** '+result);
                                document.getElementById('fileDataContent').innerHTML = parseFileData(result);
                                hideFileList();
                                viewFileData();
                            }
                            else{
                                console.log('*** Error *** '+event.message);
                            }
                        }
                    )
                }
                
                function getMapKeys(value, key, map){
                    fileIds.push(key);
                }
                
                function parseFileData(fileDataList){
                    var allTables;
                    for(var i=0; i<fileDataList.length; i++){
                        allTables = successFunction(fileDataList[i])+'</br/><br/>'
                        /*var parser = new DOMParser;
                var dom = parser.parseFromString(
                    '<!doctype html><body>' + fileDataList[i],
                    'text/html');
                var strObj = dom.body.textContent;
                console.log('*** str *** '+strObj);
                var str = "'"+strObj+"'";
                console.log('*** str 1 *** '+str);
                var s = JSON.stringify(strObj);
                console.log('*** s *** '+s);
                var jsonObj = JSON.parse(s);
                console.log('*** jsonObj *** '+jsonObj.records);
                
                Object.keys(jsonObj).forEach(function(key){
                    var value = jsonObj[key];
                    console.log(key +' --> '+value);
                })*/
                        
                    }
                    return allTables;
                }
                
                function decodeHTMLEntities(text) {
                    var entities = [
                        ['amp', '&'],
                        ['apos', '\''],
                        ['#x27', '\''],
                        ['#x2F', '/'],
                        ['#39', '\''],
                        ['#47', '/'],
                        ['lt', '<'],
                        ['gt', '>'],
                        ['nbsp', ' '],
                        ['quot', '"']
                    ];
                    
                    for (var i = 0, max = entities.length; i < max; ++i) 
                        text = text.replace(new RegExp('&'+entities[i][0]+';', 'g'), entities[i][1]);
                    
                    return text;
                }
                
                function successFunction(data) {
                    var allRows = data.split(/\r?\n|\r/);
                    var table = '<table class="slds-table slds-table--bordered slds-table--cell-buffer">';
                    for (var singleRow = 0; singleRow < allRows.length; singleRow++) {
                        
                        var rowdata = allRows[singleRow];
                        var d;
                        if (singleRow === 0) {
                            table += '<thead>';
                            table += '<tr>';
                            var rowCells = rowdata.split(',');
                            console.log('*** h *** '+rowdata);
                            for (var rowCell = 0; rowCell < rowCells.length; rowCell++) {
                                console.log('*** h1 *** '+rowCells[rowCell]);
                                table += '<th>';
                                table += rowCells[rowCell];
                                table += '</th>';
                            }
                            table += '</tr>';
                            table += '</thead>';
                            table += '<tbody>';
                        } else {
                            var rowdata2 = decodeHTMLEntities(rowdata);
                            console.log('*** rowdata *** '+rowdata2);
                            var ind = rowdata2.indexOf('"');
                            console.log('*** ind *** '+ind);
                            if(ind > 0){
                                var indChar = rowdata2.indexOf('"', ind+1);
                                console.log('*** indChar *** '+indChar);
                                var str1 = rowdata2.substring(0, ind);
                                var str2 = rowdata2.substring(ind+1, indChar);
                                var str3 = rowdata2.substring(indChar+1, rowdata.length);
                                var str4 = str2.replace(/,/g, "|");
                                //var rowdatamod = rowdata.replaceAt(indChar, '|');
                                console.log('*** str1 *** '+str1);
                                console.log('*** str2 *** '+str2);
                                console.log('*** str3 *** '+str3);
                                console.log('*** str4 *** '+str4);
                                d = str1+''+str4+''+str3;
                            }
                            else{
                                d = rowdata;
                            }
                            console.log('*** d *** '+d);
                            var rowCells = d.split(',');
                            table += '<tr class="odd">';
                            for (var rowCell = 0; rowCell < rowCells.length; rowCell++) {
                                table += '<td>';
                                table += rowCells[rowCell];
                                table += '</td>';
                            }
                            table += '</tr>';
                        }
                    } 
                    
                    table += '</tbody>';
                    table += '</table>';
                    
                    return table;
                }
                
                function createData(){
                    console.log('*** File Id List *** '+fileIds);
                    console.log(' *** orgID *** '+orgId);
                    
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.DeployController.createData}',
                        fileIds, orgId, 
                        function(result, event){
                            if(event){
                                if(result.hasErrors){
                                    console.log('*** Error *** '+result.message);
                                    document.getElementById('csResult').innerHTML = generateErrorTable(result.results);
                                }
                                else{
                                    console.log('*** Success *** '+result.message);
                                    document.getElementById('csResult').innerHTML = 'Records created successfully !!!';
                                }
                                
                            }
                            else{
                                console.log('*** Error *** '+event.message);
                                document.getElementById('csResult').innerHTML = generateErrorTable(result.results);
                            }
                            document.getElementById("viewCSResult").classList.add('slds-fade-in-open');
                            document.getElementById("viewFileDataModal").classList.remove('slds-fade-in-open');
                        }
                    )
                }
                
                function generateErrorTable(result){
                    var inrTable = '<table border="0" cellpadding="0" cellspacing="0" class="slds-table slds-table--bordered slds-table--cell-buffer" role="grid" aria-describedby="csResultTbl">'
                    inrTable += '<thead><tr role="row" class="slds-text-title_caps">';
                    inrTable += '<th class="name sorting_disabled" scope="col">';
                    inrTable += '<div class="slds-truncate">Sr No.</div></th>';
                    inrTable += '<th class="name sorting_disabled" scope="col">';
                    inrTable += '<div class="slds-truncate">Status Code</div></th>';
                    inrTable += '<th class="name sorting_asc" scope="col">';
                    inrTable += '<div class="slds-truncate">Error Message</div></th>';
                    inrTable += '</tr></thead><tbody>';
                    var cnt = 1;
                    for(var i=0; i<result.length; i++){
                        for(var j=0; j<result[i].errors.length; j++){
                            inrTable += '<tr role="row" class="odd">';
                            inrTable += '<td class="name" scope="col"><div class="slds-truncate">'+cnt+'</div></td>';
                            inrTable += '<td class="name" scope="col"><div class="slds-truncate">'+result[i].errors[j].statusCode+'</div></td>';
                            inrTable += '<td class="name sorting_1" scope="col"><div class="slds-truncate" title="'+result[i].errors[j].message+'">'+result[i].errors[j].message+'</div></td>';
                            inrTable += '</tr>';
                            cnt++;
                        }
                    }
                    inrTable += '</tbody></table>';
                    
                    return inrTable;
                }
                </script>
            </apex:form>
        </body>
    </html>
</apex:page>